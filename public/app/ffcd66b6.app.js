"use strict";angular.module("webApp",["ngCookies","ngAnimate","ngResource","ngSanitize","ui.router","ui.bootstrap","angular-inview","monospaced.elastic","angularMoment","parse-angular","services.config","angularFileUpload","segmentio","ngTagsInput","infinite-scroll","headroom","ngDropdowns"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$tooltipProvider","$uiViewScrollProvider","configuration",function(a,b,c,d,e,f,g){d.interceptors.push("HttpInterceptor"),b.otherwise("login");var h=!0;g.cordova&&"false"!=g.cordova&&(h=!1),c.html5Mode(h),f.useAnchorScroll(),e.setTriggers({mouseenter:"mouseleave",click:"click",focus:"blur",never:"mouseleave",show:"hide"})}]).run(["$rootScope","LoginService","$location","$state","$sce","UserService","configuration","segmentio","UserCommunicationService",function(a,b,c,d,e,f,g,h,i){h.load(g.segmentioKey),f.getActiveUser()&&(h.identify(f.getActiveUser(),{email:f.getActiveUserEmail()}),h.alias(f.getActiveUser())),a.$state=d,a.$sce=e,a.$on("$stateChangeStart",function(a,c,e){i.clearErrors(),$(".qtip").qtip&&$(".qtip").remove();var f=b.canSeeApp();if(!f)if(c&&c.data&&"*"==c.data.allow);else{a.preventDefault();var g=d.href(c,e);d.go("login",{redirect_to:g})}})}]),angular.module("webApp").controller("ApplicationCtrl",["$scope","$modal","LoginService","$window","segmentio","$timeout","NotificationService","OnboardingService","UserCommunicationService",function(a,b,c,d,e,f,g,h,i){a.auth={},a.data||(a.data={}),a.data.errors=i.getErrors();var j=c.canSeeApp();j===!0&&h.launchOnboarding(),a.auth.showApp=function(){return j},a.auth.logout=function(){e.track("Logout Clicked"),c.logout(),console.log("logout clicked"),d.location.href="/",d.location.reload()},a.refreshNotificationCount=function(){c.isSignedIn()&&g.loadNotificationCount(),f(function(){a.refreshNotificationCount()},3e4)},a.refreshNotificationCount(),a.notificationData=g.data,a.openCompose=function(){a.isOpen=!1,b.open({templateUrl:"app/modals/contentFormModal/contentFormModal.html",controller:"ContentFormModalCtrl",size:"small",backdrop:"static",windowClass:"content-form-modal",backdropClass:"content-form-backdrop",resolve:{content:null}})}}]),angular.module("webApp").controller("CmsCtrl",["$scope","$sce","$state",function(a,b,c){console.log("frameUrl: "+c.current.data.frameUrl),a.trustedFrameUrl=b.trustAsResourceUrl(c.current.data.frameUrl)}]).controller("UpdateCmsCtrl",["$scope","$sce","$state","$timeout","DeviceService",function(a,b,c,d,e){e.cordovaVersion().then(function(b){a.productVersion=b,b&&$("#parlio-product-version").html("Product Version: "+b)}),a.trustedFrameUrl=b.trustAsResourceUrl(c.current.data.frameUrl)}]),angular.module("webApp").config(["$stateProvider",function(a){a.state("cms",{url:"/cms",templateUrl:"app/cms/cms.html",controller:"CmsCtrl"}).state("etiquette",{url:"/etiquette",templateUrl:"app/cms/cms.html",controller:"CmsCtrl",title:"Parlio Etiquette",data:{frameUrl:"http://blog.parlio.com/etiquette/"}}).state("updates",{url:"/updates",templateUrl:"app/cms/cms.html",controller:"UpdateCmsCtrl",title:"Parlio Product Updates",data:{frameUrl:"http://blog.parlio.com/productupdates/"}})}]),angular.module("webApp").controller("CommentCtrl",["$scope","$state","$stateParams","UserInteractionService","UserService","UserCommunicationService",function(a,b,c,d,e,f){a.data={};var g=function(a,b){return a&&a.substring(0,b.length)==b};if(a.data||(a.data={}),c.id){var h=c.id,i="Comment/"+h;d.getComment(h).then(function(a){var d={},e={};if(a.commentWrappers&&a.commentWrappers[0]){var h=a.commentWrappers[0].comment;if(g(h.targetId,"Bite/")){var j=h.targetId.split("/",2)[1];d.id=j}d.commentId=c.id,b.go("commentOnContent",d,e)}else console.log("Could not find a comment with id "+i),f.addErrorByText("Unfortunately, we had a little trouble locating this content. The author may have removed it, or you may have a bad link.")})}}]),angular.module("webApp").config(["$stateProvider",function(a){a.state("comment",{url:"/comment/:id",controller:"CommentCtrl"})}]),angular.module("webApp").controller("ContentCtrl",["$scope","$state","$stateParams","$location","$anchorScroll","$timeout","$modal","FeedService","UserService","NotificationService","segmentio","UserCommunicationService",function(a,b,c,d,e,f,g,h,i,j,k,l){if(a.data||(a.data={}),c.id){{var m="Bite/"+c.id;"Comment/"+c.commentId}a.data.commentText="",a.data.activeComment=c.commentId,a.data.contentResponse={},a.data.commentResponse={},a.data.commentCount=0;var n=!1,o=function(){h.getContent(m).then(function(b){a.data.contentResponse=b,n=!0,a.data.contentResponse.contentList&&(a.data.commentCount=a.data.contentResponse.contentList[0].interactionData.commentData)},function(){l.addErrorByText("Unfortunately, we had a little trouble locating this content. The author may have removed it, or you may have a bad link.")})};o(),a.$watch("data.contentResponse.contentList[0]",function(){a.data.contentResponse&&a.data.contentResponse.contentList&&a.data.contentResponse.contentList[0]||n&&b.go("feed")}),j.markNotificationByTarget(m),a.openDiscussionPrompt=function(){a.isOpen=!1,g.open({templateUrl:"app/modals/inviteToCommentModal/inviteToCommentModal.html",controller:"InviteToCommentModalCtrl",size:"small",backdrop:"static",windowClass:"invite-to-comment-modal",backdropClass:"invite-to-comment-backdrop",resolve:{}})},a.updateComments=function(){i.getComments(m).then(function(b){a.data.commentResponse=b,a.userTags={},f(function(){if(a.data.activeComment){var b=$("#comment"+a.data.activeComment).offset();b.top-=20,$("html, body").animate({scrollTop:b.top})}},500)})},a.updateComments(),a.prevent={},a.addComment=function(b,c){a.submitInProgress=!0,k.track("Add Comment",{targetId:m}),i.getSelfUser().then(function(d){a.data.commentResponse.users[d.username]=d,i.addComment(m,b,c).then(function(b){a.submitInProgress=!1,a.data.commentText="",a.data.commentResponse.commentWrappers.push(b),i.getCommentCount(m).then(function(b){a.data.contentResponse.contentList&&(a.data.contentResponse.contentList[0].interactionData.commentData=b),a.data.commentCount=b})})})}}}]),angular.module("webApp").config(["$stateProvider",function(a){a.state("content",{url:"/content/:id",templateUrl:"app/content/content.html",controller:"ContentCtrl"}).state("commentOnContent",{url:"/content/:id/comment/:commentId",templateUrl:"app/content/content.html",controller:"ContentCtrl"})}]),angular.module("webApp").controller("ControlCtrl",["$scope","$state","LoginService",function(a,b,c){c.isAdmin()||(console.log("not authorized error"),b.go("login"))}]),angular.module("webApp").config(["$stateProvider",function(a){a.state("abstractControl",{url:"/control",templateUrl:"app/control/control.html",controller:"ControlCtrl","abstract":!0}).state("control",{url:"",templateUrl:"app/control/invites/invites.html",controller:"InvitesCtrl",parent:"abstractControl"})}]),angular.module("webApp").controller("InvitesCtrl",["$scope","$modal","UserService","InviteService",function(a,b,c,d){a.data={},a.data.activeUserId=c.getActiveUser(),a.data.inviteEditing={},a.data.skip=0,a.data.listLength=0,d.getGroupCounts().then(function(b){a.data.groupCounts=b}),a.data.getMore=function(){a.data.skip=a.data.cursor.nextSkip,a.updateList()},a.inviteEmail=function(c,d){b.open({templateUrl:"app/modals/inviteEmailModal/inviteEmailModal.html",controller:"InviteEmailModalCtrl",size:"small",windowClass:"content-form-modal",backdropClass:"content-form-backdrop",resolve:{invite:function(){return c},isReInvite:function(){return d}}}).result.then(function(){a.updateList()},function(){})},a.editInvite=function(b,c,e,f){d.updateInvite(b,c,e,f).then(function(){a.data.inviteEditing[b]=!1})},a.updateList=function(b){b&&(a.data.skip=0),d.getList(a.data.searchTerm,a.data.statusFilter,a.data.skip).then(function(b){a.data.inviteList=b.inviteList,a.data.cursor=b.cursor;var d=[];angular.forEach(b,function(a){a.usedBy&&d.push(a.usedBy)}),c.getUsers(d).then(function(b){a.data.userMap={},angular.forEach(b,function(b){a.data.userMap[b.username]=b})})})},a.generateNew=function(b,c,e){d.generateNew(b,c,e).then(function(b){a.generatedFor=null,a.generatedForEmail=null,a.context=null,a.data.inviteList.unshift(b),b.generatedForEmail&&a.inviteEmail(b,!1)})},a.deleteCode=function(b){window.confirm("Are you sure you want to delete?")&&d.deleteCode(a.data.inviteList[b].code).then(function(){a.data.inviteList.splice(b,1)})},a.updateList()}]),angular.module("webApp").config(["$stateProvider",function(a){a.state("control.invites",{url:"/invites",templateUrl:"app/control/invites/invites.html",controller:"InvitesCtrl",parent:"abstractControl"})}]),angular.module("webApp").controller("ControlPostsCtrl",["$scope","TopicService","TopicAdminService","ContentService",function(a,b,c,d){a.skip=0,a.categories=[],b.getCategories().then(function(b){angular.forEach(b,function(b){a.categories.push(b.id)})}),a.autoComplete=function(a){return b.autoComplete(a).then(function(a){var b=[];return angular.forEach(a,function(a){a.state="topic",a.params={topic:a.value},a.label=""+a.label,b.push(a)}),b})},a.updateContent=function(a){d.updateContent(a).then(function(){console.log("updated")})},a.removeTopic=function(b,c){c.topics.splice(b,1),a.updateContent(c)};var e=function(){d.getBiteAdminList(a.skip).then(function(b){a.contentList=b})};a.getMore=function(){a.skip+=a.contentList.length,e()},a.addTopic=function(b,c){-1==c.topics.indexOf(b.value)&&c.topics.push(b.value),a.updateContent(c)},a.changeSelect=function(b,c){-1==c.topics.indexOf(b)&&c.topics.push(b),a.updateContent(c)},a.categoryInTags=function(a,b){var c=!1;return angular.forEach(b,function(b){b==a&&(c=!0)}),c},e()}]).filter("tagIsCategory",["$sce",function(){return function(){}}]),angular.module("webApp").config(["$stateProvider",function(a){a.state("control.posts",{url:"/posts",templateUrl:"app/control/posts/posts.html",controller:"ControlPostsCtrl",parent:"abstractControl"})}]),angular.module("webApp").controller("ControlTopicsCtrl",["$scope","TopicService","TopicAdminService",function(a,b,c){a.data.types=b.types(),a.data.searchForTopic=function(){var b=!a.data.topicSearch||a.pendingFilter;c.search(a.data.topicSearch,b,!!a.pendingFilter).then(function(b){a.data.topics=b})},a.data.topicEditing={},a.data.updateTopic=function(b){a.data.topicEditing[b.id]=!1,c.update(b)},a.data.addNewTopic=function(b){c.add(b).then(function(b){a.data.topics=[b]})},a.data.topicClass=function(a){switch(a.verifiedStatus){case"VERIFIED":return"active";case"REJECTED":return"danger";default:return""}},a.data.searchForTopic()}]),angular.module("webApp").config(["$stateProvider",function(a){a.state("control.topics",{url:"/topics",templateUrl:"app/control/topics/topics.html",controller:"ControlTopicsCtrl",parent:"abstractControl"})}]),angular.module("webApp").factory("cordovaReady",["configuration",function(a){return function(b){setTimeout(function(){navigator&&navigator.splashscreen&&navigator.splashscreen.hide()},1e3);var c=[],d=function(){c.push(Array.prototype.slice.call(arguments))};return document.addEventListener("deviceready",function(){c.forEach(function(a){b.apply(this,a)}),d=b,console.log("Parlio app is ready"),cordova.getAppVersion().then(function(a){console.log("Parlio app version is: "+a)});var e=null;"iOS"==device.platform&&(e=a.hockeyAppIdIOS,console.log("Device platform is iOS")),"Android"==device.platform&&(e=a.hockeyAppIdAndroid,console.log("Device platform is Android")),hockeyapp.start(function(){console.log("Started hockeyapp")},function(){console.log("ERROR starting hockeyapp")},e)},!1),function(){return d.apply(this,arguments)}}}]),angular.module("webApp").directive("biAutoFocus",function(){return{link:function(a,b,c){a.$watch(c.biAutoFocus,function(d){d===!0&&(b[0].focus(),a[c.biAutoFocus]=!1)})}}}),angular.module("webApp").directive("biChangeInProgress",["$modal","$state",function(a,b){return{require:"ngModel",link:function(c,d,e,f){var g,h=function(){return"You haven't finished your post yet.  Are you sure you want to leave without finishing?"},i=!1;c.$on("$stateChangeStart",function(c,d,e){i&&(c.preventDefault(),a.open({templateUrl:"app/modals/changeInProgressModal/changeInProgressModal.html",controller:"ChangeInProgressModalCtrl",size:"small",backdrop:"true"}).result.then(function(){},function(){i=!1,b.transitionTo(d,e)}))}),c.$on("$destroy",function(){$(window).unbind("beforeunload",h)}),c.$watch(function(){return f.$modelValue},function(a){g||(g=a),a!=g&&a?(i=!0,$(window).bind("beforeunload",h)):(i=!1,$(window).unbind("beforeunload",h))},!0)}}}]),angular.module("webApp").directive("biComment",["UserService",function(){return{templateUrl:"app/directives/biComment/biComment.html",restrict:"EA",scope:{users:"=",commentWrapper:"=",onDelete:"&"},link:function(){},controller:["$scope","$modal","$state","$stateParams","FeedService","UserService","NotificationService","segmentio",function(a,b,c,d,e,f,g,h){a.activeUser=f.getActiveUser(),a.isEditing=!1,a.deleting=!1,a.editCommentToggle=function(){a.isEditing=!a.isEditing},a.deleteComment=function(){b.open({templateUrl:"app/modals/deleteConfirmModal/deleteConfirmModal.html",controller:"DeleteConfirmModalCtrl",size:"small",backdrop:"true"}).result.then(function(){a.deleting=!0,f.deleteComment(a.commentWrapper.comment.id).then(function(){a.onDelete&&a.onDelete(),a.deleted=!0},function(){})})},a.updateEditedComment=function(){h.track("Update Comment",{commentObject:Comment}),f.editComment(a.commentWrapper.comment).then(function(){a.isEditing=!1})}}]}}]),angular.module("webApp").directive("biContent",["$state","$compile","UserService","FeedService","ContentService","LoginService","segmentio",function(a,b,c,d,e,f,g){return{scope:{users:"=",topics:"=",contentWrapper:"=content",truncate:"@"},templateUrl:"app/directives/biContent/biContent.html",restrict:"EA",link:function(){},controller:["$scope","$sce","$modal","$state",function(a,b,h){a.data={},a.data.isAdmin=f.isAdmin(),a.data.activeUser=c.getActiveUser();a.expanded=!1,a.exceedmax=!1,a.returnText=function(){a.displaytext=a.contentWrapper.content.text,a.truncate&&e.shouldTruncateText(a.contentWrapper.content.text)&&(a.exceedmax=!0,a.expanded||(a.displaytext=e.truncateText(a.contentWrapper.content.text)))},a.toggle=function(){a.expanded=!a.expanded,a.expanded&&g.track("Read more clicked",{targetId:a.contentWrapper.content.id,targetType:a.contentWrapper.content.type}),a.returnText()},a.$watch("contentWrapper",function(){void 0!=a.contentWrapper&&a.returnText()}),a.data.expand=function(a){h.open({templateUrl:"app/modals/expandImageModal/expandImageModal.html",controller:"ExpandImageCtrl",size:"small",backdrop:"true",windowClass:"content-form-modal",backdropClass:"content-form-backdrop",resolve:{image:function(){return a}}})},a.data.edit=function(){h.open({templateUrl:"app/modals/contentFormModal/contentFormModal.html",controller:"ContentFormModalCtrl",size:"small",backdrop:"static",windowClass:"content-form-modal",backdropClass:"content-form-backdrop",resolve:{content:function(){return a.contentWrapper.content}}}).result.then(function(){a.refreshContent()},function(){})},a.data.shadow=function(b){a.contentWrapper.content.isShadowed=b,e.shadowContent(a.contentWrapper.content.id,b)},a.data["delete"]=function(){h.open({templateUrl:"app/modals/deleteConfirmModal/deleteConfirmModal.html",controller:"DeleteConfirmModalCtrl",size:"small",backdrop:"static",windowClass:"content-form-modal",backdropClass:"content-form-backdrop"}).result.then(function(){e.deleteContent(a.contentWrapper.content.id).then(function(){a.contentWrapper=void 0})},function(){})},a.refreshContent=function(){d.getContent(a.contentWrapper.targetId).then(function(b){a.contentWrapper=b.contentList[0],angular.forEach(b.topics,function(b,c){a.topics[c]=b}),a.returnText()})},a.data.viewContent=function(a){c.viewContent(a)}}]}}]),angular.module("webApp").directive("biContentForm",["$state","$timeout","segmentio","TopicService","ContentService","ImageService",function(a,b,c,d,e,f){return{scope:{content:"=",onDismiss:"&",onSuccess:"&",contentWrapper:"=content"},templateUrl:"app/directives/biContentForm/biContentForm.html",restrict:"EA",link:function(a,c){a.triggerTooltip=function(a,d){b(function(){c.find(a).trigger("show"),$(a).parent().find(".tooltip-inner").html(d),b(function(){c.find(a).trigger("hide")},3e3)})}},controller:["$scope","$upload","$timeout",function(b,g){if(b.selectedCategory={},b.contentEdit={},b.blockSubmit=!1,b.categories=[],b.categoryMap={},b.selectedCategoryKey=null,b.contentEdit.topics=[],b.topicObjects=[],b.topicMap={},d.getCategories().then(function(a){angular.forEach(a,function(a){b.categoryMap[a.id]=a,b.categories.push(a)}),b.selectedCategoryKey&&angular.copy(b.categoryMap[b.selectedCategoryKey],b.selectedCategory)}),b.timeToRead=function(){return b.contentEdit.text?e.timeToRead(b.contentEdit.text):0},b.content&&(b.contentEdit=angular.copy(b.content)),b.contentEdit.topics.length>0){var h=!1;d.getExternalTopics(b.contentEdit.topics).then(function(a){angular.forEach(a,function(a){b.topicMap[a.id]=a}),angular.forEach(b.contentEdit.topics,function(a){var c=b.topicMap[a];c.label=c.name,h||"CATEGORY"!==c.type?b.topicObjects.push(c):(h=!0,b.selectedCategoryKey=c.id,b.categoryMap&&(angular.copy(b.categoryMap[b.selectedCategoryKey],b.selectedCategory),delete b.topicMap[b.selectedCategoryKey]))})})}b.contentEdit.imageIds||(b.contentEdit.imageIds=[]),b.contentEdit.urlData&&(b.textHasUrl=!0),b.contentEdit.imageIds&&b.contentEdit.imageIds[0]&&(b.uploadedImageId=b.contentEdit.imageIds[0],b.uploadedImageUrl=f.getUrl(b.uploadedImageId)),b.forms={},b.imageProgress=null,b.changeCategory=function(){b.selectedCategoryKey=b.selectedCategory.id;var a=b.topicMap[b.selectedCategoryKey],c=b.topicObjects.indexOf(a);c>-1&&(b.topicObjects.splice(c,1),delete b.topicMap[b.selectedCategoryKey]),b.validateTopics()},b.removeImage=function(){b.uploadedImageId=null,b.uploadedImageUrl=null,b.contentEdit.imageIds=[]},b.onFileSelect=function(a){var c=a[0];b.imageProgress=null,b.uploadedImageId=null,b.uploadedImageUrl=null,b.blockSubmit=!0,b.upload=g.upload({url:f.uploadImagePath(),method:"POST",data:{myObj:b.myModelObj},file:c}).progress(function(a){b.imageProgress=parseInt(90*a.loaded/a.total)}).success(function(a){b.blockSubmit=!1,b.uploadedImageUrl=a.imageUrl,b.contentEdit.imageIds[0]=a.imageId,b.imageProgress=null}).error(function(){b.blockSubmit=!1,b.imageProgress=null,b.uploadedImageId=null,b.contentEdit.imageIds[0]=null,alert("An error occured with your image upload")})},b.dismissContent=function(){b.onDismiss()},b.autoComplete=function(a){var b=[];return d.autoComplete(a).then(function(c){var e=!1;if(angular.forEach(c,function(c){var f={id:c.value,name:c.label,label:c.label,type:c.type};c.posts&&(f.label+=" ("+c.posts+" posts)"),f.id===d.sanitize(a)&&(e=!0),b.push(f)}),!e){var f={id:a,name:a,label:a+" (new tag)",type:"PENDING"};b.push(f)}return b})};var i=3;b.validateTopics=function(){if(b.contentEdit.topics=[],b.topicObjects.length>i)return b.triggerTooltip(".content-topics","You can only add up to 3 tags"),void(b.topicObjects=b.topicObjects.splice(0,i));var a=b.topicObjects.length-1,c=b.topicObjects[a];if(c){var e=null;if("id"in c?e=c.id:(e=d.sanitize(c.label),c={id:e,name:c.label,label:c.label}),e===b.selectedCategoryKey)return b.triggerTooltip(".content-topics","You have already selected "+e+" as the category"),void b.topicObjects.splice(a,1);b.topicMap[c.id]=c,b.topicObjects[a]=c}angular.forEach(b.topicObjects,function(a){a.label=a.name,b.contentEdit.topics.push(a.id)}),b.selectedCategory&&b.contentEdit.topics.unshift(b.selectedCategory.id)},b.hasUrl=function(a){var b=e.urlMatcher;return a.match(b)},b.removeUrl=function(){b.textHasUrl=null},b.validateForm=function(){return b.validForm=!0,(!b.selectedCategory||$.isEmptyObject(b.selectedCategory))&&(b.triggerTooltip(".content-categories","Please select a category"),b.validForm=!1),b.contentEdit.text||b.contentEdit.urlData||(b.triggerTooltip(".content-textarea","Please add some text"),b.validForm=!1),b.validForm},b.afterSubmit=function(c){c&&c.id?(b.contentEdit.id||a.go("content",{id:c.id}),b.onSuccess&&b.onSuccess()):alert("Some error occurred"),b.submitInProgress=!1},b.submitContent=function(){var a=b.validateForm();c.track("Submitted Content",{topics:b.contentEdit.topics}),a&&(b.submitInProgress=!0,b.blockSubmit=!0,e.submitContent(b.contentEdit).then(function(a){b.afterSubmit(a)},function(){alert("Sorry, some error occured"),b.submitInProgress=!1,b.blockSubmit=!1}))};var j=function(a){e.resolveUrl(a).then(function(c){b.contentEdit.urlData=c.urlData,b.textHasUrl=!0,b.contentEdit.text=b.contentEdit.text.replace(a,"")})};b.checkTextArea=function(){if(!b.textHasUrl){var a=b.contentEdit.text;if(b.hasUrl(a)){var c=b.hasUrl(a)[0];j(c)}}}}]}}]),angular.module("webApp").directive("biEnhancedFollowButton",["FollowService","UserService","segmentio",function(a,b,c){return{scope:{target:"@",type:"@",after:"&"},templateUrl:"app/directives/biEnhancedFollowButton/biEnhancedFollowButton.html",restrict:"EA",link:function(){},controller:["$scope",function(d){d.values=a.getFollowValues(d.type),d.showButton=function(){return!("user"==d.type&&b.getActiveUser()==d.target||d.values[d.target]!==!0&&d.values[d.target]!==!1)},d.showState=function(){return d.values[d.target]?d.hover?1:0:-1},d.toggle=function(){d.values[d.target]=!d.values[d.target],c.track("Follow",{type:d.type,target:d.target,value:d.values[d.target]}),a.followTarget(d.type,d.target,d.values[d.target]).then(function(){d.after()&&d.after()})}}]}}]),angular.module("webApp").directive("biErrSrc",function(){return{link:function(a,b,c){b.bind("error",function(){c.src!=c.biErrSrc&&(console.log("bad Image",c.src),c.$set("src",c.biErrSrc))}),c.$observe("ngSrc",function(a){!a&&c.biErrSrc&&c.$set("src",c.biErrSrc)})}}}),angular.module("webApp").directive("biErrorCommunication",function(){return{scope:{error:"="},templateUrl:"app/directives/biErrorCommunication/biErrorCommunication.html",restrict:"EA",link:function(a){console.log("ERROR",a.error)}}}),angular.module("webApp").directive("biExternalLink",["DeviceService","$window",function(a,b){return{restrict:"A",link:function(c,d,e){c.$watch("attrs",function(){d.attr("target","_blank"),a.isCordova()&&d.bind("click",function(a){a.preventDefault();var c=e.href;b.open(c,"_blank","location=no")})})}}}]),angular.module("webApp").directive("biFollowButton",["FollowService","UserService","DeviceService","segmentio",function(a,b,c,d){return{scope:{target:"@",type:"@",after:"&"},templateUrl:"app/directives/biFollowButton/biFollowButton.html",restrict:"EA",link:function(){},controller:["$scope",function(c){c.values=a.getFollowValues(c.type),c.showButton=function(){return!("user"==c.type&&b.getActiveUser()==c.target||c.values[c.target]!==!0&&c.values[c.target]!==!1)},c.showState=function(){return c.values[c.target]?c.hover?1:0:-1},c.toggle=function(){c.values[c.target]=!c.values[c.target],d.track("Follow",{type:c.type,target:c.target,value:c.values[c.target]}),a.followTarget(c.type,c.target,c.values[c.target]).then(function(){c.after()&&c.after()})}}]}}]),angular.module("webApp").directive("biFollowPlus",["FollowService","UserService","segmentio",function(a,b,c){return{scope:{target:"@",type:"@",after:"&"},templateUrl:"app/directives/biFollowPlus/biFollowPlus.html",restrict:"EA",controller:["$scope",function(d){d.values=a.getFollowValues(d.type),d.showButton=function(){return!("user"==d.type&&b.getActiveUser()==d.target||d.values[d.target]!==!0&&d.values[d.target]!==!1)},d.toggle=function(){d.values[d.target]=!d.values[d.target],c.track("Follow",{type:d.type,target:d.target,value:d.values[d.target]}),a.followTarget(d.type,d.target,d.values[d.target]).then(function(){d.after()&&d.after()})}}]}}]),angular.module("webApp").directive("biFrameSetDimensionsOnLoad",function(){return{restrict:"A",link:function(a,b){b.on("load",function(){var a=b[0].contentWindow.document.body.scrollHeight+"px",c="100%";b.css("width",c),b.css("height",a)})}}}),angular.module("webApp").directive("biHighlightMentions",["$timeout","$state","$compile","ContentService",function(a,b,c,d){return{restrict:"A",scope:{biHighlightMentions:"=",change:"="},link:function(a,e){a.$watchCollection("[biHighlightMentions, change]",function(){var f=a.biHighlightMentions,g=e.text(),h=0,i=g;angular.forEach(f,function(a){var c=b.href("profile",{userId:a.id}),d="<a class='mentiontext' mention-link='"+a.id+"' href='"+c+"'>",e="</a>";i=i.slice(0,a.offset+h)+d+i.slice(a.offset+h,a.offset+a.length+h)+e+i.slice(a.offset+a.length+h),h+=d.length+e.length});var j=d.urlMatcher;angular.forEach(i.match(j),function(a){var b=d.cleanContentUrl(a),c=b;c.length>50&&(c=c.substr(0,40)+"..."+c.substr(c.length-10)),i=i.replace(b,"<a bi-external-link title='"+b+"' href='"+b+"'>"+c+"</a>")});var k="<br/>";i=i.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+k+"$2");var i="<span>"+i+"</span>";e.html(c(i)(a))})}}}]),angular.module("webApp").directive("biHover",["DeviceService",function(a){return{restrict:"EA",scope:{enter:"&",leave:"&"},link:function(b,c){a.isTouch()||(c.bind("mouseenter",function(){b.$apply(function(){b.enter()})}),c.bind("mouseleave",function(){b.$apply(function(){b.leave()})}))}}}]),angular.module("webApp").directive("biHref",["$location","$state","$stateParams",function(a,b){return function(c,d,e){c.$watch("biHref",function(){d.bind("click",function(){console.log("BI",e.biHref);var c=function(a,b){return a&&a.substring(0,b.length)==b},d="profile",f={},g={},h=e.biHref;if(c(h,"Bite/")){var i=h.split("/",2)[1];d="content",f.id=i}else f.userId="";b.href(d,f)==a.path()&&(g.reload=!0),b.go(d,f,g)})})}}]),angular.module("webApp").directive("biLoader",function(){return{templateUrl:"app/directives/biLoader/biLoader.html",restrict:"EA",link:function(){}}}),angular.module("webApp").directive("biMuteButton",["FollowService","UserService","segmentio",function(a,b,c){return{templateUrl:"app/directives/biMuteButton/biMuteButton.html",scope:{target:"@",type:"@",name:"@"},restrict:"EA",link:function(){},controller:["$scope","$modal",function(d,e){d.values=a.getMuteValues(d.type),d.showButton=function(){return!("user"==d.type&&b.getActiveUser()==d.target||d.values[d.target]!==!0&&d.values[d.target]!==!1)},d.showState=function(){return d.values[d.target]?d.hover?1:0:-1},d.toggle=function(){if(console.log("toggle"+d.name),d.values[d.target])d.values[d.target]=!d.values[d.target],c.track("Mute",{type:d.type,target:d.target,value:d.values[d.target]}),a.muteTarget(d.type,d.target,d.values[d.target]);else{var b=e.open({templateUrl:"app/directives/biMuteButton/biMuteModal.html",controller:"biMuteModalCtrl",size:"sm",resolve:{name:function(){return d.name}}});c.track("Attempt Mute"),b.result.then(function(){console.log("MUTED"),d.values[d.target]=!d.values[d.target],c.track("Mute",{type:d.type,target:d.target,value:d.values[d.target]}),a.muteTarget(d.type,d.target,d.values[d.target])},function(){console.log("Mute cancelled"),c.track("Mute Cancelled")})}}}]}}]),angular.module("webApp").controller("biMuteModalCtrl",["$scope","$modalInstance","name",function(a,b,c){a.name=c,a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("webApp").directive("biNotification",function(){return{templateUrl:"app/directives/biNotification/biNotification.html",restrict:"EA",scope:{users:"=",notification:"="},link:function(){},controller:["$scope","$state","NotificationService",function(a,b,c){a.notificationUrl=function(a){return c.getNotificationUrl(a)},a.notificationClicked=function(d){var e=a.notificationUrl(d);e==b.href(b.current)&&b.reload(),c.markNotificationById(d.id,!1)}}]}}),angular.module("webApp").directive("biOnboardingFollowCategories",["$animate","$timeout","OnboardingService","TopicService","segmentio",function(a,b,c,d,e){return{scope:{onNext:"&",categories:"=",numRequiredCategories:"=",step:"=",totalSteps:"="},templateUrl:"app/directives/biOnboardingFollowCategories/biOnboardingFollowCategories.html",restrict:"EA",link:function(){},controller:["$scope",function(a){a.focusinControl={},a.canSubmit=!1,a.toggleFade=!1,a.getCategoryImageUrl=d.getCategoryImageUrl,a.nextButtonLabel=a.step<a.totalSteps?"Next":"Finish",e.track("Entered onboarding categories",{step:a.step,totalSteps:a.totalSteps}),a.numMoreRequiredCategories=Math.max(0,a.numRequiredCategories-c.numFollowed(a.categories)),a.checkCanSubmit=function(){a.canSubmit=c.isFollowsMinRequired(a.categories),a.numMoreRequiredCategories=Math.max(0,a.numRequiredCategories-c.numFollowed(a.categories))},a.isCanSubmit=function(){a.canSubmit?(e.track("Exited onboarding categories",{step:a.step,totalSteps:a.totalSteps}),a.onNext()):(a.toggleFade=!0,b(function(){a.toggleFade=!1},1e3))}}]}}]),angular.module("webApp").directive("biOnboardingProfile",function(){return{scope:{onNext:"&",user:"=",step:"=",totalSteps:"="},templateUrl:"app/directives/biOnboardingProfile/biOnboardingProfile.html",restrict:"EA",link:function(){},controller:["$scope","$location","$state","$timeout","$modal","UserService","segmentio",function(a,b,c,d,e,f,g){a.submitInProgress=!1,a.actionLabel=1!=a.step?"Create":"Update",a.nextButtonLabel=a.step<a.totalSteps?"Next":"Finish",a.currentUserId=f.getActiveUser(),a.editingImage=!1,g.track("Entered onboarding profile",{step:a.step,totalSteps:a.totalSteps}),a.editImage=function(){var b=e.open({templateUrl:"app/modals/uploadImageModal/uploadImageModal.html",controller:"uploadImageCtrl",size:"small",windowClass:"upload-image-modal",backdropClass:"content-form-backdrop"});b.result.then(function(b){a.user.image=b;var c={};c.image=b,f.updateCurrentUser(c)},function(){})},a.canSubmit=!0,a.updateUser=function(){var b={};a.canSubmit=!1,b.title=a.user.title,b.bio=a.user.bio,b.email=a.user.email,b.image=a.user.image,a.submitInProgress=!0,f.updateCurrentUser(b).then(function(b){a.user=b,a.canSubmit=!0,g.track("Exited onboarding profile",{step:a.step,totalSteps:a.totalSteps}),a.onNext(),a.submitInProgress=!1},function(b){a.canSubmit=!0,a.submitInProgress=!1,console.log("Error submitting profile "+b)})}}]}}),angular.module("webApp").directive("biOverflow",["formatContentFilter",function(a){return{restrict:"A",scope:{text:"=",expandedClass:"@",collapsedClass:"@"},link:function(b,c){c.addClass(b.collapsedClass),c.addClass("expandable"),b.$watch("scope.text",function(){c.html(a(b.text));var d="";console.log("actual height",$(c).height()),console.log("scroll height",$(c).prop("scrollHeight")),$(c).height()<$(c).prop("scrollHeight")?(d='<span class="bi-expand-element-wrapper"><span class="fade-in">&nbsp;&nbsp;</span><span class="bi-expand-element">...&nbsp;<a>See more</a></span></span>',c.html(a(b.text)+d),$(c).find(".bi-expand-element").click(function(){console.log("CLICKED"),c.removeClass(b.collapsedClass),c.addClass(b.expandedClass),c.html(a(b.text))})):c.html(a(b.text))})}}}]),angular.module("webApp").directive("biReactionButton",["UserService","DeviceService","segmentio",function(a,b,c){return{templateUrl:"app/directives/biReactionButton/biReactionButton.html",scope:{text:"@",reaction:"@",targetId:"@",reactionData:"=",users:"="},controller:["$scope",function(b){b.toggleReaction=function(){var d=!1,e=b.reactionData,f=b.reaction;e[f]?d=e[f].countData.includesActiveUser:(e[f]={},e[f].countData={},e[f].countData.count=0),e[f].countData.includesActiveUser=!d,d?(e[f].countData.count--,c.track("Undo Upvote Clicked",{targetId:b.targetId})):(e[f].countData.count++,c.track("Upvote Clicked",{targetId:b.targetId})),a.reactToContent(b.targetId,f,!d).then(function(a){b.reactionData=a})}}],restrict:"EA"}}]),angular.module("webApp").directive("biReactionList",["$modal","UserService",function(a,b){return{restrict:"A",scope:{targetId:"@",reaction:"@"},link:function(c,d){d.click(function(){a.open({templateUrl:"app/modals/userList/userList.html",controller:"UserlistCtrl",size:"sm",backdrop:"true",windowClass:"reaction-list-modal",resolve:{users:function(){return b.getReactionList(c.targetId,c.reaction).then(function(a){return a
})},title:function(){return"VIEW"==c.reaction?"Your post reached":"UPVOTE"==c.reaction?"Your post was upvoted by":!1}}})})}}}]),angular.module("webApp").directive("biReactionStats",function(){return{templateUrl:"app/directives/biReactionStats/biReactionStats.html",restrict:"E",scope:{biReactionStats:"=data",reactionType:"@",users:"=",label:"@",targetId:"@"},link:function(){},controller:["$scope","$window","DeviceService",function(a,b,c){a.limit=a.biReactionStats>10?5:10,c.isSmall()&&(a.limit=3)}]}}),angular.module("webApp").directive("biScrollRefresh",["$window","$location","$state",function(a,b,c){return{restrict:"EA",link:function(a,b){$(document).ready(function(){var a=0,d=-50,e=".scrollable";b.bind("touchstart",function(){a=0,0===$(e).scrollTop()&&$(e).scrollTop(1)}),b.bind("touchend",function(){d>a&&(c.reload(),$("#parlio-main-loader").hide())}),b.bind("touchmove",function(){a>d&&$("#parlio-main-loader").hide(),d>a&&$("#parlio-main-loader").show(),a=Math.min(a,b.scrollTop())})})}}}]),angular.module("webApp").directive("biSelectProfileImage",function(){return{templateUrl:"app/directives/biSelectProfileImage/biSelectProfileImage.html",restrict:"EA",link:function(){},scope:{image:"="},controller:["$scope","$modal","$upload","UserService","ImageService",function(a,b,c,d,e){a.uploadInProgress=!1,a.newImage=function(b){b&&b.length>0&&(a.uploadInProgress=!0,c.upload({url:e.uploadImagePath(),method:"POST",data:{},file:b[0]}).progress(function(){}).success(function(b){a.uploadInProgress=!1,a.image=b.imageUrl,f(a.image)}).error(function(){a.uploadInProgress=!0,alert("An error occured with your image upload")}))};var f=function(a){var b={};b.image=a,d.updateCurrentUser(b)};a.editImage=function(){var c=b.open({templateUrl:"app/modals/uploadImageModal/uploadImageModal.html",controller:"uploadImageCtrl",size:"small",windowClass:"profile-image-modal",resolve:{image:function(){return a.image}}});c.result.then(function(b){a.image=b,f(a.image)},function(){})}}]}}),angular.module("webApp").directive("biStatsHover",["$compile","$sce","$templateRequest","$state","TopicService","DeviceService","UserInteractionService",function(a,b,c,d,e,f,g){return{restrict:"A",scope:{statsTarget:"=",biStatsHover:"@"},link:function(h,i){f.isTouch()||(i.on("$destroy",function(){$(i).off()}),h.$watch(b.parseAsResourceUrl("'app/directives/biStatsHover/biStatsHover.html'"),function(b){c(b).then(function(b){$(document).ready(function(){$(i).qtip({content:{text:function(c,f){return console.log(h.biStatsHover),"topic"==h.biStatsHover?(h.targetId=h.statsTarget.id,h.postsLink=d.href("topic",{topic:h.targetId}),h.followersLink=d.href("topic.followers",{topic:h.targetId}),e.getStatistics(h.statsTarget.id).then(function(c){h.topicStats=c;var d=a(b)(h);f.set("content.text",d)})):"user"==h.biStatsHover&&(h.targetId=h.statsTarget.username,h.postsLink=d.href("profile",{userId:h.targetId}),h.followersLink=d.href("profile.followers",{userId:h.targetId}),g.getProfileInteractions(h.targetId).then(function(c){h.topicStats=c;var d=a(b)(h);f.set("content.text",d)})),a("<bi-loader></bi-loader>")(h)}},position:{my:"bottom center",at:"top center",effect:!1,adjust:{method:"flip flip"},viewport:$(window)},show:{solo:!0,delay:500},hide:{fixed:!0,delay:1e3}})})})}))}}}]),angular.module("webApp").directive("biTitle",["NotificationService",function(a){return{template:"{{data.notificationCountBrackets}} Parlio",restrict:"EA",transclude:"true",controller:["$scope",function(b){b.data={},b.data=a.data}]}}]),angular.module("webApp").directive("biTopicButton",["$state","FollowService","TopicService","segmentio",function(a,b,c,d){return{templateUrl:"app/directives/biTopicButton/biTopicButton.html",restrict:"EA",scope:{topic:"="},link:function(e){e.getCategoryImageUrl=c.getCategoryImageUrl,e.values=b.getFollowValues("topic"),e.image=c.getImageForType(e.topic.type),e.goToTopic=function(){a.go("topic",{topic:e.topic.id})},e.toggle=function(){e.values[e.topic.id]=!e.values[e.topic.id],d.track("Follow",{type:"topic",target:e.topic.id,value:e.values[e.topic.id]}),b.followTarget("topic",e.topic.id,e.values[e.topic.id]).then(function(){})}}}}]),angular.module("webApp").directive("biUserLink",function(){return{templateUrl:"app/directives/biUserLink/biUserLink.html",restrict:"A",transclude:"true",replace:"true",scope:{user:"="}}}),angular.module("webApp").directive("biUserTaggable",["$parse","$timeout","UserService",function(a,b,c){return{scope:{userTags:"="},require:"ngModel",link:function(a,d,e,f){var g=$(d),h=function(){$(g).textntags("getTagsMapFacebook",function(b){var c=[];angular.forEach(b,function(a){var b=Object.keys(a)[0];c.push(a[b])}),a.userTags=c}),f.$setViewValue($(g).val())},i=[];angular.forEach(a.userTags,function(a){var b={id:a.id,name:a.name,type:a.type};i.push([a.offset,a.length,"@",b])}),$(g).keyup(function(){h()});var j=!1;b(function(){$(g).textntags({initialTags:i,showImageOrIcon:!0,onDataRequest:function(a,b,d,e){j||(j=c.autoComplete(b),j.then(function(a){var b=[];e.call(this,b),angular.forEach(a,function(a){var c={id:a.value,name:a.label,avatar:a.image,type:"user"};b.push(c)}),e.call(this,b),j=!1}))}}).bind("tagsAdded.textntags",function(){h()}).bind("tagsRemoved.textntags",function(){h()})})}}}]),angular.module("webApp").directive("biUserVoice",function(){return{restrict:"A",scope:{mode:"@",position:"@",identify:"="},link:function(a){a.position||(a.position="automatic"),a.mode||(a.mode="contact"),UserVoice&&(UserVoice.push(["addTrigger",{mode:a.mode,position:a.position}]),UserVoice.push(["autoprompt",{}]));var b=function(){a.identify&&UserVoice.push(["identify",a.identify])};a.$watch("identify",b)}}}),angular.module("webApp").controller("FeedCtrl",["$scope","$state","$stateParams","$location","$templateCache","FeedService","UserService","ContentService","TopicService","DeviceService",function(a,b,c,d,e,f,g,h,i,j){a.data||(a.data={}),a.data.feed={},a.feedLimit=5,a.$watch(function(){return window.innerWidth},function(){a.isSmall=j.isSmall()}),a.growFeed=function(){a.feedLimit+=5};var k=c.topic;b.current.data&&b.current.data.myFeed?f.getMyFeed().then(function(b){a.data.feed=b}):f.getExploreFeed(k).then(function(b){a.data.feed=b})}]),angular.module("webApp").config(["$stateProvider",function(a){a.state("feed",{url:"/feed",templateUrl:"app/feed/feed.html",controller:"FeedCtrl",title:"Explore"}).state("myfeed",{url:"/myfeed",templateUrl:"app/feed/feed.html",controller:"FeedCtrl",title:"My Feed",data:{myFeed:!0}})}]),angular.module("webApp").filter("formatContent",["$sce",function(){return function(a){return a?a.replace(/\n/g,"<br/>"):""}}]),angular.module("webApp").filter("highlightMentions",["$sce","formatContentFilter",function(a,b){return function(c,d){var e=0,f=c;return angular.forEach(d,function(a){var b="<a href='/profile/"+a.id+"'>",c="</a>";f=f.slice(0,a.offset+e)+b+f.slice(a.offset+e,a.offset+a.length+e)+c+f.slice(a.offset+a.length+e),e+=b.length+c.length}),f=b(f),a.trustAsHtml(f)}}]),angular.module("webApp").filter("reverse",function(){return function(a){return"reverse filter: "+a}}),angular.module("webApp").filter("shortenName",function(){return function(a){if(a&&a.length>30){var b=a.split(" ");return b[b.length-1]=b[b.length-1].substr(0,1)+".",b.join(" ")}return a}}),angular.module("webApp").filter("toDate",function(){return function(a){return console.log("to Date"),a?new Date(a).toISOString():null}}),angular.module("webApp").controller("HomeCtrl",["$scope","$rootScope","LoginService","$state","$location","OnboardingService",function(a,b,c,d,e,f){c.canSeeApp()?(f.launchOnboarding(),d.go("feed")):"login"!=e.path()&&d.go("login")}]),angular.module("webApp").controller("LeftnavCtrl",["$scope","$location","FollowService","UserService","TopicService","LoginService",function(a,b,c,d,e,f){c.refreshUserTopics(),a.data={},a.functions={},a.data.userLoggedIn=d.getActiveUser(),a.data.activeUserId=d.getActiveUser(),a.isAdmin=f.isAdmin(),a.followData=c.data,e.getTrending().then(function(b){a.data.trending=b})}]),!function(a){a&&a.module("headroom",[]).directive("headroom",function(){return{restrict:"EA",scope:{tolerance:"=",offset:"=",classes:"=",scroller:"@"},link:function(b,c){var d={};a.forEach(Headroom.options,function(a,c){d[c]=b[c]||Headroom.options[c]}),d.scroller&&(d.scroller=a.element(d.scroller)[0]);var e=new Headroom(c[0],d);e.init(),b.$on("destroy",function(){e.destroy()})}}})}(window.angular),!function(a,b){function c(a){this.callback=a,this.ticking=!1}function d(b){return b&&"undefined"!=typeof a&&(b===a||b.nodeType)}function e(a){if(arguments.length<=0)throw new Error("Missing arguments in extend function");var b,c,f=a||{};for(c=1;c<arguments.length;c++){var g=arguments[c]||{};for(b in g)f[b]="object"!=typeof f[b]||d(f[b])?f[b]||g[b]:e(f[b],g[b])}return f}function f(a){return a===Object(a)?a:{down:a,up:a}}function g(a,b){b=e(b,g.options),this.lastKnownScrollY=0,this.elem=a,this.debouncer=new c(this.update.bind(this)),this.tolerance=f(b.tolerance),this.classes=b.classes,this.offset=b.offset,this.scroller=b.scroller,this.initialised=!1,this.onPin=b.onPin,this.onUnpin=b.onUnpin,this.onTop=b.onTop,this.onNotTop=b.onNotTop}var h={bind:!!function(){}.bind,classList:"classList"in b.documentElement,rAF:!!(a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame)};a.requestAnimationFrame=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame,c.prototype={constructor:c,update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}},g.prototype={constructor:g,init:function(){return g.cutsTheMustard?(this.elem.classList.add(this.classes.initial),setTimeout(this.attachEvent.bind(this),100),this):void 0},destroy:function(){var a=this.classes;this.initialised=!1,this.elem.classList.remove(a.unpinned,a.pinned,a.top,a.initial),this.scroller.removeEventListener("scroll",this.debouncer,!1)},attachEvent:function(){this.initialised||(this.lastKnownScrollY=this.getScrollY(),this.initialised=!0,this.scroller.addEventListener("scroll",this.debouncer,!1),this.debouncer.handleEvent())},unpin:function(){var a=this.elem.classList,b=this.classes;(a.contains(b.pinned)||!a.contains(b.unpinned))&&(a.add(b.unpinned),a.remove(b.pinned),this.onUnpin&&this.onUnpin.call(this))},pin:function(){var a=this.elem.classList,b=this.classes;a.contains(b.unpinned)&&(a.remove(b.unpinned),a.add(b.pinned),this.onPin&&this.onPin.call(this))},top:function(){var a=this.elem.classList,b=this.classes;a.contains(b.top)||(a.add(b.top),a.remove(b.notTop),this.onTop&&this.onTop.call(this))},notTop:function(){var a=this.elem.classList,b=this.classes;a.contains(b.notTop)||(a.add(b.notTop),a.remove(b.top),this.onNotTop&&this.onNotTop.call(this))},getScrollY:function(){return void 0!==this.scroller.pageYOffset?this.scroller.pageYOffset:void 0!==this.scroller.scrollTop?this.scroller.scrollTop:(b.documentElement||b.body.parentNode||b.body).scrollTop},getViewportHeight:function(){return a.innerHeight||b.documentElement.clientHeight||b.body.clientHeight},getDocumentHeight:function(){var a=b.body,c=b.documentElement;return Math.max(a.scrollHeight,c.scrollHeight,a.offsetHeight,c.offsetHeight,a.clientHeight,c.clientHeight)},getElementHeight:function(a){return Math.max(a.scrollHeight,a.offsetHeight,a.clientHeight)},getScrollerHeight:function(){return this.scroller===a||this.scroller===b.body?this.getDocumentHeight():this.getElementHeight(this.scroller)},isOutOfBounds:function(a){var b=0>a,c=a+this.getViewportHeight()>this.getScrollerHeight();return b||c},toleranceExceeded:function(a,b){return Math.abs(a-this.lastKnownScrollY)>=this.tolerance[b]},shouldUnpin:function(a,b){var c=a>this.lastKnownScrollY,d=a>=this.offset;return c&&d&&b},shouldPin:function(a,b){var c=a<this.lastKnownScrollY,d=a<=this.offset;return c&&b||d},update:function(){var a=this.getScrollY(),b=a>this.lastKnownScrollY?"down":"up",c=this.toleranceExceeded(a,b);this.isOutOfBounds(a)||(a<=this.offset?this.top():this.notTop(),this.shouldUnpin(a,c)?this.unpin():this.shouldPin(a,c)&&this.pin(),this.lastKnownScrollY=a)}},g.options={tolerance:{up:0,down:0},offset:0,scroller:a,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",initial:"headroom"}},g.cutsTheMustard="undefined"!=typeof h&&h.rAF&&h.bind&&h.classList,a.Headroom=g}(window,document),function(a,b){function c(a){return function(c,d){var e={};return d?b.each(a,function(a,b){e[a]=c[b]}):b.each(a,function(a,b){e[b]=c[a]}),e}}var d={V:86,Z:90,BACKSPACE:8,TAB:9,RETURN:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,COMMA:188,SPACE:32,HOME:36,END:35,DELETE:46,D:68},e={onDataRequest:a.noop,realValOnSubmit:!0,triggers:{"@":{}},templates:{wrapper:b.template('<div class="textntags-wrapper"></div>'),beautifier:b.template('<div class="textntags-beautifier"><div></div></div>'),tagHighlight:b.template('<strong class="<%= class_name %>"><span>$<%= idx %></span></strong>'),tagList:b.template('<div class="textntags-tag-list"></div>'),tagsListItem:b.template("<li><%= title %></li>"),tagsListItemImage:b.template('<img src="<%= img %>" />'),tagsListItemIcon:b.template('<div class="icon <%= no_img_class %>"></div>')}},f={minChars:2,uniqueTags:!0,showImageOrIcon:!0,keys_map:{id:"id",title:"name",description:"",img:"avatar",no_img_class:"icon",type:"type"},syntax:b.template("@[[<%= id %>:<%= type %>:<%= title %>]]"),parser:/(@)\[\[(.+?):([\w\s\.\-]+):([\w\s@\.,-\/#!$%\^&\*;:{}=\-_`~()]+)\]\]/gi,parserGroups:{id:2,type:3,title:4},classes:{tagsDropDown:"",tagActiveDropDown:"active",tagHighlight:""}},g=b.memoize(c),h={htmlEncode:function(a){return b.escape(a)},highlightTerm:function(a,b){return b||b.length?a.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+b+")(?![^<>]*>)(?![^&;]+;)","gi"),"<b>$1</b>"):a},setCaratPosition:function(a,b){if(a.createTextRange){var c=a.createTextRange();c.move("character",b),c.select()}else a.selectionStart?(a.focus(),a.setSelectionRange(b,b)):a.focus()}},i=function(c){function i(c){return null!=R?!1:(R=a.extend(!0,{},e,c),delete R.triggers[""],b.each(R.triggers,function(c,d){if(R.triggers[d]=a.extend(!0,{},f,c),b.find(Z,function(a){return a===d}))var e="\\"+d;else var e=d;R.triggers[d].finder=new RegExp(e+"\\w+(\\s+\\w+)?\\s?$","gi")}),I=R.templates,!0)}function j(){var a=b.uniq(b.map(O,function(a){return a[3]}));K.trigger("tagsRemoved.textntags",[a]),O=[],s()}function k(){K=a(c).bind({click:u,keydown:v,keypress:w,keyup:x,input:y,blur:z}),J=K.wrapAll(a(I.wrapper())).parent(),R.realValOnSubmit&&K.closest("form").bind("submit.textntags",function(){j()})}function l(){M=a(I.tagList()),M.appendTo(J),M.delegate("li","click",B)}function m(){L=a(I.beautifier()),L.prependTo(J)}function n(a){var c=o(),d=r(c);if(O=d.tagsCollection,s(),K.val(d.plain_text),a&&a.initialTags&&(O=a.initialTags),O.length>0){var e=b.uniq(b.map(O,function(a){return a[3]}));K.trigger("tagsAdded.textntags",[e])}}function o(){return K.val()}function p(a){var c=a||q();return c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),b.each(R.triggers,function(a){var b=I.tagHighlight({idx:a.parserGroups.title,class_name:a.classes.tagHighlight});c=c.replace(a.parser,b)}),c=c.replace(/\n/g,"<br />&shy;"),c=c.replace(/ {2}/g," &nbsp;")+"&shy;"}function q(){var a,c=o(),d=0,e=R.triggers;return a=b.map(O,function(a){var b=a[0]-d,f=b>0?c.substr(d,b):"",h=g(e[a[2]].keys_map),i=e[a[2]].syntax(h(a[3],!1));return d=a[0]+a[1],f+i}),a.join("")+c.substr(d)}function r(a){if(0==b.isString(a))return null;var c=""+a,d=[],e=R.triggers;return b.each(e,function(c,e){for(var f,g,h,i=a.split(c.parser),j=0,k=0,l=i.length,m=b.max(c.parserGroups);l>j;)i[j]==e?(f={},b.each(c.parserGroups,function(a,b){f[c.keys_map[b]]=i[j+a-1],"title"==b&&(g=i[j+a-1].length)}),d.push([k,g,e,f]),h=g,j+=m):(h=i[j].length,j+=1),k+=h}),d=b.sortBy(d,function(a){return a[0]}),b.each(e,function(a){c=c.replace(a.parser,"$"+a.parserGroups.title)}),{plain_text:c,tagged_text:a,tagsCollection:d}}function s(){L.find("div").html(p()),K.css("height",L.outerHeight()+"px")}function t(a){a=a||0;var c,d,e=-1,f=K[0].selectionStart+e,g=K.val().substr(0,f+a),h=null;g&&g.length&&(c=b.find(R.triggers,function(a,b){var c=g.match(a.finder);return c?(h=b,d=c[0].substr(b.length),!0):!1}),!h||c&&d.length<c.minChars?A():(Q=d,P=h,b.defer(b.bind(H,this,Q,h))))}function u(){t(0)}function v(a){var c=d,e=K[0].selectionStart,f=K[0].selectionEnd,g=K.val();switch(S=f-e,T=g.length,U=a.keyCode,a.keyCode){case c.UP:case c.DOWN:if(!M.is(":visible"))return!0;var h=null;return h=a.keyCode==c.DOWN?N&&N.length?N.next():M.find("li").first():N&&N.length?N.prev():M.find("li").last(),F(h,R.triggers[P].classes.tagActiveDropDown),!1;case c.RETURN:case c.TAB:return N&&N.length?(V=!0,N.click(),!1):!0;case c.BACKSPACE:case c.DELETE:return a.keyCode==c.BACKSPACE&&e==f&&e>0&&(e-=1),a.keyCode==c.DELETE&&e==f&&(f+=1),f>e&&(C(e,f),D(e,e-f)),!0;case c.D:if(a.ctrlKey)return!1;break;case c.LEFT:case c.RIGHT:case c.HOME:case c.END:b.defer(function(){t.call(this,0)});break;case c.V:a.ctrlKey&&(W=!0,X=e,Y=f-e,C(e,f));break;case c.Z:if(a.ctrlKey)return!1}return!0}function w(a){a.keyCode==d.RETURN&&s(K.val()),V&&((a.keyCode==d.RETURN||a.keyCode==d.TAB)&&a.preventDefault(),V=!1)}function x(){if(W){if(W=!1,S>0)return;var a=(K[0].selectionStart,K[0].selectionEnd);D(X,a-X-Y),s()}}function y(){var a=-1;if(U!=d.BACKSPACE&&U!=d.DELETE)if(S>0){var b=K[0].selectionStart+a,c=S,e=b+c,f=K.val().length-T;C(b,e),D(e,f)}else if(!W){var b=K[0].selectionStart+a,e=K[0].selectionEnd+a,c=e-b;U==d.RETURN?(D(b-1,1),C(b,b)):(D(b,1),C(b,b+1))}s(),t(1)}function z(){b.delay(A,100)}function A(){N=null,M.hide().empty()}function B(){return E(a(this).data("tag")),!1}function C(a,c){var d=[];O=b.filter(O,function(b){var e=b[0],f=e+b[1],g=e>=a&&c>e||f>a&&c>=f||a>e&&f>c;return g&&d.push(b[3]),!g}),d.length>0&&K.trigger("tagsRemoved.textntags",[d])}function D(a,c){O=b.map(O,function(b){return b[0]>=a&&(b[0]+=c),b})}function E(a){var c=R.triggers[P],d=g(c.keys_map),e=d(a,!1),f=o(),i=K[0].selectionStart,j=i-P.length-Q.length,k=j+e.title.length,l=f.substr(0,j),m=f.substr(i),n=l+e.title+m;D(i,k-i),a[c.keys_map.id]=""+a[c.keys_map.id],O.push([j,e.title.length,P,a]),O=b.sortBy(O,function(a){return a[0]}),P="",Q="",A(),K.val(n),s(),K.focus(),h.setCaratPosition(K[0],k),K.trigger("tagsAdded.textntags",[[a]])}function F(a,b){a&&a.length?(a.addClass(b),a.siblings().removeClass(b),N=a):(N.removeClass(b),N=null)}function G(c,d,e){var f=R.triggers[d];if(f.uniqueTags){var i=f.keys_map.id,j=b.map(O,function(a){return a[3][i]});e=b.reject(e,function(a){return b.include(j,""+a[i])})}if(e.length){var k=a("<ul />").addClass(f.classes.tagsDropDown).appendTo(M),l=f.showImageOrIcon?I.tagsListItemImage:I.tagsListItemIcon,m=g(f.keys_map);b.each(e,function(b,d){var e,g=m(b,!1);g.title=h.highlightTerm(h.htmlEncode(g.title),c),e=a(I.tagsListItem(g)).data("tag",b),g.img&&(e=e.prepend(l(g))),e.appendTo(k),0===d&&F(e,f.classes.tagActiveDropDown)}),M.show()}}function H(a,b){A(),R.onDataRequest.call(this,"search",a,b,function(c){G(a,b,c)})}var I,J,K,L,M,N,O,P,Q,R=null,S=0,T=0,U=0,V=!1,W=!1,X=0,Y=0,Z=["[","^","$",".","|","?","*","+","(",")","\\"];return{init:function(a){i(a)&&(k(),l(),m(),n(a)),s()},val:function(a){if(b.isString(a)){var c=b.uniq(b.map(O,function(a){return a[3]}));return K.trigger("tagsRemoved.textntags",[c]),K.val(a),void n()}if(b.isFunction(a)){var d=O.length?q():o();a.call(this,d)}},reset:j,getTags:function(a){if(b.isFunction(a)){var c=b.map(O,function(a){return a[3]});a.call(this,b.uniq(c))}},getTagsMap:function(a){b.isFunction(a)&&a.call(this,O)},getTagsMapFacebook:function(a){if(b.isFunction(a)){var c={},d=R.triggers;b.each(O,function(a){var b=g(d[a[2]].keys_map),e=b(a[3],!1);c[a[0]]=[{id:e.id,name:e.title,type:e.type,offset:a[0],length:a[1]}]}),a.call(this,c)}},parseTaggedText:function(a,c){b.isFunction(c)&&c.call(this,r(a))}}};a.fn.textntags=function(c){var d=arguments;return this.each(function(){var e=c,f=a.data(this,"textntags")||a.data(this,"textntags",new i(this));return b.isFunction(f[e])?f[e].apply(this,Array.prototype.slice.call(d,1)):"object"!=typeof e&&e?void a.error("Method "+e+" does not exist"):f.init.call(this,e)})}}(jQuery,_),angular.module("webApp").controller("LoginCtrl",["$scope","$location","$window","$state","$stateParams","$sanitize","$modal","LoginService","UserService","InviteService","segmentio","DeviceService","pushNotification",function(a,b,c,d,e,f,g,h,i,j,k,l,m){a.data={},a.data.showLogin=!i.getActiveUser();var n=h.isWhitelisted(),o=i.getActiveUser();a.data.hasError=!1,a.data.showInvite=o&&!n,a.data.showLoader=!1,a.canSubmitInvite=!0;var p=function(a){k.identify(i.getActiveUser(),{email:i.getActiveUserEmail()}),k.alias(i.getActiveUser()),k.track("Signed up",{type:a}),l.isCordova()&&m.registerForPushNotification(),c.location.reload()};if(h.isSignedIn()&&h.refreshUser().then(function(){!o||h.isWhitelisted()||e.invite||j.attemptedSignup(i.getActiveUserName(),i.getActiveUserEmail()),h.isWhitelisted()&&!n&&c.location.reload()}),h.isSignedIn()&&h.isWhitelisted()){a.data.hideSplash=!0;var q;e.state&&(q=h.unpackState(e.state).redirect_to),e.redirect_to&&(q=e.redirect_to),q?b.path(q).search({}):d.go("feed",{},{reload:!0})}else{e.code&&e.state&&(h.continueOAuth(e.code,e.state).then(function(a){console.log("OAUTHDONE",a),p(a.source)}),a.data.showLogin=!1,a.data.showInvite||(a.data.showLoader=!0)),k.track("Sign up appeared",{type:"Facebook"}),a.doRequestInvite=function(){g.open({templateUrl:"app/modals/requestInviteModal/requestInviteModal.html",controller:"RequestInviteModalCtrl",backdrop:"true",windowClass:"request-invite-modal"})};{new Parse.Promise}a.doFBLogin=function(){if(k.track("Login Clicked",{type:"Facebook"}),"undefined"==typeof window.FB){g.open({templateUrl:"app/login/adBlockerErrorModal.html",controller:"adBlockerErrorModalCtrl",size:"sm"})}else h.doFBLogin().then(function(){p("Facebook")})},a.doLinkedInLogin=function(){k.track("Login Clicked",{type:"LinkedIn"}),h.startLinkedInAuth(e.invite,e.redirect_to)}}e.invite?a.code=e.invite:e.state&&(a.code=h.unpackState(e.state).invite),a.attemptWhitelist=function(b){a.canSubmitInvite=!1,h.attemptWhitelist(b).then(function(b){console.log("whitelist response",b),a.canSubmitInvite=!0,"true"==b||1==b?(a.data.showInvite=!1,h.refreshUser().then(function(){console.log("REFRESHED"),c.location.reload()})):alert("An error occured - is your code valid?")})},l.isSafariPrivateBrowsing()&&(a.data.hasError=!0,a.data.showLogin=!1,a.data.errorTemplate="app/login/privateBrowsingError.html")}]).controller("OldLoginCtrl",["$state","$stateParams",function(a,b){a.go("login",{invite:b.invite})}]),angular.module("webApp").controller("adBlockerErrorModalCtrl",["$scope","$modalInstance",function(a,b){a.cancel=function(){b.dismiss("cancel")}}]),angular.module("webApp").config(["$stateProvider",function(a){a.state("login",{url:"/login?code&state&invite&redirect_to",templateUrl:"app/login/login.html",controller:"LoginCtrl",data:{allow:"*"}}).state("loginInvite",{url:"/login/:invite",templateUrl:"app/login/login.html",controller:"OldLoginCtrl",data:{allow:"*"}})}]),angular.module("webApp").controller("MembersCtrl",["$scope","UserInteractionService",function(a,b){a.data||(a.data={}),a.data.memberSearch="";var c={};a.data.searchForMember=function(){b.searchUsers(a.data.memberSearch).then(function(b){a.data.userSearch=b,c={},angular.forEach(a.data.userSearch.users,function(a){c[a.user.username]=!0})})},a.data.getMore=function(){b.searchUsers(a.data.memberSearch,a.data.userSearch.cursor.nextSkip).then(function(b){a.data.userSearch.cursor=b.cursor,b.users.forEach(function(b){c[b.user.username]||(c[b.user.username]=!0,a.data.userSearch.users.push(b))})})},a.data.searchForMember()}]),angular.module("webApp").config(["$stateProvider",function(a){a.state("members",{url:"/members",templateUrl:"app/members/members.html",controller:"MembersCtrl",title:"Members Directory"})}]),angular.module("webApp").controller("ChangeInProgressModalCtrl",["$scope","$state","$modalInstance",function(a){a.leave=function(){a.$dismiss()},a.stay=function(){a.$close()}}]),angular.module("webApp").controller("ConfirmedInviteModalCtrl",["$scope","$modalInstance","inviteeId","inviteeName","inviteeImage",function(a,b,c,d,e){a.inviteeId=c,a.inviteeName=d,a.inviteeImage=e,a.close=function(){b.dismiss("cancel")}}]),angular.module("webApp").controller("ContentFormModalCtrl",["$scope","$state","$modalInstance","content",function(a,b,c,d){a.content=d,a.dismiss=function(){a.$dismiss("Discarded")},a.success=function(){a.$close()}}]),angular.module("webApp").controller("DeleteConfirmModalCtrl",["$scope","$modalInstance",function(a,b){a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("webApp").controller("ExpandImageCtrl",["$scope","$modal","$modalInstance","image",function(a,b,c,d){a.image=d,a.cancel=function(){c.dismiss("cancel")}}]),angular.module("webApp").controller("InviteEmailModalCtrl",["$scope","$modalInstance","$state","$stateParams","InviteService","UserService","invite","isReInvite",function(a,b,c,d,e,f,g,h){a.data={},a.email={},a.email.code=g.code,a.email.fromName=f.getActiveUserName(),a.email.fromEmail=f.getActiveUserEmail(),a.email.toEmail=g.generatedForEmail,a.email.toName=g.generatedFor.split(" ")[0],a.email.title=h?"Following up: Invitation to Parlio":"Invitation to Parlio",e.getInviteText(h).then(function(b){a.email.text=b.string}),a.invite=function(){a.data.disableSubmit=!0,e.sendEmail(a.email).then(function(){a.$close()})},a.cancel=function(){console.log("CLOSE"),a.$dismiss()}}]),angular.module("webApp").controller("InviteToCommentModalCtrl",["LoginService","$scope","$modal","$modalInstance","$state","$stateParams","segmentio","UserService","UserInteractionService",function(a,b,c,d,e,f,g,h,i){b.data={},b.targetId=f.id,b.invite=function(){var e=a.userId(),f=b.data.selectedUserID;g.track("Discussion Prompted",{inviterId:e,targetId:b.targetId,inviteeId:f}),i.promptToDiscuss("Bite/"+b.targetId,b.data.inviteMessage,f).then(function(){d.close(),c.open({templateUrl:"app/modals/confirmedInviteModal/confirmedInviteModal.html",controller:"ConfirmedInviteModalCtrl",size:"small",backdrop:"static",windowClass:"confirmed-invite-modal",backdropClass:"confirmed-invite-backdrop",resolve:{inviteeId:function(){return f},inviteeName:function(){return b.data.selectedUserName},inviteeImage:function(){return b.data.selectedUserImage}}})})},b.cancel=function(){d.dismiss("cancel")},b.autoComplete=function(a){b.data.selectedUserID=null;var c=[];return h.autoComplete(a,!0,Parse.User.current().getUsername()).then(function(a){if(angular.forEach(a,function(a){a.state="profile",a.params={userId:a.value},c.push(a)}),0==c.length){var b={};b.label="No Users Found",b.state="none",b.params={userId:null},c.push(b)}return c})},b.selectUser=function(a){"No Users Found"==a.label?(b.data.selectedUserName="",b.data.selectedUserID=null):(b.data.selectedUserName=a.label,b.data.selectedUserID=a.params.userId,b.data.selectedUserImage=a.image)}}]),angular.module("webApp").controller("OnboardingFollowCategoriesModalCtrl",["$scope","$modalInstance","categories","numRequiredCategories","step","totalSteps",function(a,b,c,d,e,f){a.categories=c,a.numRequiredCategories=d,a.step=e,a.totalSteps=f,a.next=function(){b.close()}}]),angular.module("webApp").controller("OnboardingProfileModalCtrl",["$scope","$modalInstance","user","step","totalSteps",function(a,b,c,d,e){a.user=c,a.step=d,a.totalSteps=e,a.next=function(){b.close()}}]),angular.module("webApp").controller("RequestInviteModalCtrl",["$scope","$state","$modalInstance","InviteService",function(a,b,c,d){a.data={},a.submitAttempted=!1,a.submit=function(b){a.submitAttempted=!0,b.$valid&&d.requestInvite(a.data.request).then(function(){a.data.submitted=!0})},a.ok=function(){a.$dismiss()},a.stay=function(){a.$close()}}]),angular.module("webApp").controller("uploadImageCtrl",["$scope","$timeout","$upload","$modalInstance","ContentService","ImageService","image",function(a,b,c,d,e,f,g){a.imageUrl=g,a.onSuccess=function(a){d.close(a)},a.cancel=function(){d.dismiss("cancel")}}]).directive("biUploadImage",["$timeout","$upload","ImageService",function(a,b,c){return{scope:{onSuccess:"=",ngModel:"="},templateUrl:"app/modals/uploadImageModal/biUploadImage.html",restrict:"E",link:function(d,e){var f=e.find(".image-cropper");d.editInPlace=function(){d.$apply(function(){d.editingImage=!0})},a(function(){f.cropit({imageBackground:!0,exportZoom:1,allowCrossOrigin:1,onImageLoaded:function(){d.editInPlace()}}),f.cropit("imageSrc",d.ngModel),d.editInPlace()}),d.editingImage=!1,d.openFileChooser=function(){a(function(){e.find(".cropit-image-input").click()})},d.ok=function(){var a=$(".modal-upload .image-cropper").cropit("export");d.uploadInProgress=!0,b.upload({url:c.uploadImagePath(),method:"POST",data:{},file:c.dataURItoBlob(a)}).progress(function(a){d.imageProgress=parseInt(90*a.loaded/a.total)}).success(function(a){d.uploadInProgress=!1,d.onSuccess(a.imageUrl)}).error(function(){d.uploadInProgress=!0,alert("An error occured with your image upload")})}},controller:["$scope",function(){}]}}]),angular.module("webApp").controller("UserlistCtrl",["$scope","users","title","$modal","$log","$modalInstance",function(a,b,c,d,e,f){a.title=c,a.data.userList=b,a.cancel=function(){f.dismiss("cancel")}}]),angular.module("webApp").controller("NotificationsCtrl",["$scope","NotificationService",function(a,b){a.data||(a.data={}),a.functions||(a.functions={}),a.notificationData=b.data,b.loadNotifications(),b.resetNotifications(),a.notificationUrl=function(a){return b.getNotificationUrl(a)},a.toggleNotificationUnread=function(a,c){a.unread=c?c:!a.unread,b.markNotificationById(a.id,a.unread)}}]),angular.module("webApp").config(["$stateProvider",function(a){a.state("notifications",{url:"/notifications",templateUrl:"app/notifications/notifications.html",controller:"NotificationsCtrl",title:"Notifications"}).state("notificationsRedirect",{url:"/notifications/:id",controller:"NotificationsRedirectCtrl"})}]),angular.module("webApp").controller("NotificationsRedirectCtrl",["$scope","$stateParams","$location","NotificationService",function(a,b,c,d){{var e=b.id;d.getNotificationById(e).then(function(a){var b=d.getNotificationUrl(a);c.path(b)})}}]),angular.module("webApp").controller("ProfileCtrl",["$scope","$stateParams","UserService","FeedService","UserInteractionService","FollowService","$templateCache",function(a,b,c,d,e){a.data||(a.data={});var f=c.getActiveUser();if(b.userId)var f=b.userId;a.data.profileUserId=f,a.data.currentUserId=c.getActiveUser(),a.data.canFollow=f!=c.getActiveUser(),a.data.profileUser=!1,c.getUser(f).then(function(b){a.data.profileUser=b}),a.data.profileInteractions=!1,a.data.refreshProfile=function(){e.getProfileInteractions(f).then(function(b){a.data.profileInteractions=b})},a.data.refreshProfile()}]).controller("ProfilePostsCtrl",["$scope","$stateParams","FeedService",function(a,b,c){a.data.profileFeed={},a.feedLimit=5,a.data.refreshProfile(),c.getFeedByAuthor(a.data.profileUserId).then(function(b){a.data.profileFeed=b}),a.growFeed=function(){a.feedLimit+=5}}]).controller("ProfileTopicsCtrl",["$scope","$stateParams","UserService",function(a,b,c){a.data.refreshProfile(),c.getUserTopics(a.data.profileUserId).then(function(b){a.data.userTopics=b})}]).controller("ProfileFollowersCtrl",["$scope","$stateParams","UserService",function(a,b,c){a.data.refreshProfile(),a.data.userList={},c.getUserFollowers(a.data.profileUserId).then(function(b){a.data.userList=b})}]).controller("ProfileFollowingCtrl",["$scope","$stateParams","UserService",function(a,b,c){a.data.refreshProfile(),a.data.userList={},c.getUserFollowings(a.data.profileUserId).then(function(b){a.data.userList=b})}]).controller("ProfileCommentsCtrl",["$scope","$stateParams","FeedService",function(a,b,c){a.data.refreshProfile(),a.data.commentFeed={},c.getCommentsFeed(a.data.profileUserId).then(function(b){a.data.commentFeed=b
})}]),angular.module("webApp").config(["$stateProvider","$urlRouterProvider",function(a){a.state("profileSelf",{url:"/profile",templateUrl:"app/profile/profile.html",controller:"ProfileCtrl",title:"My Profile"}).state("abstractProfile",{"abstract":!0,url:"/profile/:userId",templateUrl:"app/profile/profile.html",controller:"ProfileCtrl",title:"Profile"}).state("profile",{url:"",parent:"abstractProfile",templateUrl:"app/profile/profile.posts.html",controller:"ProfilePostsCtrl",title:"Profile"}).state("profile.views",{url:"/views",parent:"abstractProfile",templateUrl:"app/profile/profile.posts.html",controller:"ProfilePostsCtrl",title:"Profile"}).state("profile.topics",{url:"/topics",parent:"abstractProfile",templateUrl:"app/profile/profile.topics.html",controller:"ProfileTopicsCtrl",title:"Profile"}).state("profile.following",{url:"/following",parent:"abstractProfile",templateUrl:"app/profile/profile.users.html",controller:"ProfileFollowingCtrl",title:"Profile"}).state("profile.followers",{url:"/followers",parent:"abstractProfile",templateUrl:"app/profile/profile.users.html",controller:"ProfileFollowersCtrl",title:"Profile"}).state("profile.comments",{url:"/comments",parent:"abstractProfile",templateUrl:"app/profile/profile.comments.html",controller:"ProfileCommentsCtrl",title:"Profile"})}]),angular.module("webApp").factory("pushNotification",["$rootScope","cordovaReady","configuration",function(a,b,c){return{registerForPushNotification:b(function(){window.parsePlugin.initialize(c.parseId,c.parseClientKey,function(){parsePlugin.subscribe("Parlio",Parse.User.current()._sessionToken,function(){console.log("Successfully registered for push notifications")},function(){console.log("Failed to register for push notifications")})},function(){console.log("Failed to initialize parse and register for push notifications")})})}}]),angular.module("webApp").controller("RightnavCtrl",["$scope","$location","$timeout","FollowService","TopicService","UserService","UserInteractionService","NotificationService",function(a,b,c,d,e,f,g,h){d.refreshUserTopics(),a.data={},a.functions={},a.data.userLoggedIn=f.getActiveUser(),a.followData=d.data,a.functions.getCategoryImageUrl=e.getCategoryImageUrl,a.functions.refreshRecommendedTopics=function(b,c){var b=0,c=null;a.data.recommendedTopics&&(c=a.data.recommendedTopics.seed,b=a.data.recommendedTopics.cursor.nextSkip),g.getRecommendedTopics(b,c).then(function(b){a.data.recommendedTopics=b})},a.functions.refreshRecommendedUsers=function(b,c){var b=0,c=null;a.data.recommendedUsers&&(c=a.data.recommendedUsers.seed,b=a.data.recommendedUsers.cursor.nextSkip),g.getRecommendedUsers(b,c).then(function(b){a.data.recommendedUsers=b})},a.functions.refreshRecommendedTopics(0),a.functions.refreshRecommendedUsers(0),a.topicTypes=e.types(),a.data.userLoggedIn=f.getActiveUser(),a.data.activeUserId=f.getActiveUser();var i=!1;a.notificationOpen=!1,a.functions.toggleNotificationDropdown=function(b){a.notificationOpen=b,1==b?(i=!0,h.loadNotifications()):i&&h.resetNotifications()}}]),angular.module("webApp").controller("SearchCtrl",["$scope","$stateParams","FeedService",function(a,b,c){a.data||(a.data={}),a.data.query=b.q,a.data.feed={},c.getExploreFeed(null,a.data.query).then(function(b){a.data.feed=b})}]),angular.module("webApp").config(["$stateProvider",function(a){a.state("search",{url:"/search/:q",templateUrl:"app/search/search.html",controller:"SearchCtrl"})}]),angular.module("webApp").service("ContentService",["$q","$http","UserService","configuration","DeviceService",function(a,b,c,d,e){var f={};return f.urlMatcher=/\(*((https?:\/\/)[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)\)*/gi,f.getBiteAdminList=function(a){var c=d.contentServer+"/biteadmin",e={skip:a};return b.get(c,{params:e}).then(function(a){return a.data})},f.truncateTextLength=function(){return e.isSmall()?250:e.isMedium()?500:750},f.shouldTruncateText=function(a){return a.length>Math.round(1.2*f.truncateTextLength())},f.truncateText=function(a){return a.substr(0,f.truncateTextLength())},f.wordCount=function(a){return a=a.replace(/(^\s*)|(\s*$)/gi,""),a=a.replace(/[ ]{2,}/gi," "),a=a.replace(/\n /,"\n"),a.split(" ").length},f.timeToRead=function(a){var b=0;return a&&(b=f.wordCount(a)),Math.round(b/250*60)},f.resolveUrl=function(a){a=f.cleanContentUrl(a);var c=d.contentServer+"/urls",e={url:a};return b.get(c,{params:e}).then(function(a){return console.log(a.data),a.data})},f.submitContent=function(a){var e=d.contentServer+"/bites";return a.userId=c.getActiveUser(),a.id?(e+="/"+a.id,b.put(e,a).then(function(a){return console.log(a.data),a.data})):b.post(e,a).then(function(a){return console.log(a.data),a.data})},f.cleanContentUrl=function(a){var b=f.urlMatcher;return a.replace(b,function(a){return a.replace(/\(/g,"").replace(/\)/g,"")})},f.shadowContent=function(a,c){var e=d.contentServer+"/bites/"+a+"/shadow/"+c;b.put(e)},f.updateContent=function(a){var c=d.contentServer+"/bites/"+a.id;return b.put(c,a).then(function(a){return a.data})},f.deleteContent=function(a){var c=d.contentServer+"/bites/"+a;return b["delete"](c).then(function(a){return a})},f}]),angular.module("webApp").service("DeviceService",["$window","$q","configuration",function(a,b,c){var d={};return d.isSmall=function(){return a.innerWidth<700},d.isMedium=function(){return a.innerWidth>=700&&a.innerWidth<1200},d.isLarge=function(){return a.innerWidth>=1200&&a.innerWidth<1600},d.isXLarge=function(){return a.innerWidth>=1600},d.isSafariPrivateBrowsing=function(){try{localStorage.test=1}catch(a){return!0}return!1},d.isCordova=function(){return c.cordova&&"false"!==c.cordova},d.cordovaVersion=function(){var a=b.defer();return d.isCordova&&"undefined"!=typeof cordova?cordova.getAppVersion().then(function(a){return a}):(a.reject(),a.promise)},d.isMobile=function(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a},d.isTouch=function(){return"ontouchstart"in document.documentElement},d}]),angular.module("webApp").factory("FacebookAngularPatch",["$q","$timeout",function(a,b){return function(){}}]),angular.module("webApp").factory("FeedService",["$http","UserService","FollowService","configuration","$sce",function(a,b,c,d,e){var f=function(b,d){return a.get(b,{params:d}).then(function(a){return angular.forEach(a.data.contentList,function(a){a.embed&&a.embed.youtubeEmbedId&&(a.embedUrl=e.trustAsResourceUrl("https://www.youtube.com/embed/"+a.embed.youtubeEmbedId+"?feature=oembed"))}),c.registerMetadata(a.data.followMetadata),a.data})};return{getExploreFeed:function(a,c){var e=d.feedServer+"/feed/ungrouped/explore",g={};return g.userId=b.getActiveUser(),a&&(g.topic=a),c&&(g.query=c),f(e,g)},getCommentsFeed:function(e){var f=d.feedServer+"/feed/comments/"+e,g={};return g.userId=b.getActiveUser(),a.get(f,{params:g}).then(function(a){return c.registerMetadata(a.data.followMetadata),console.log(a.data),a.data})},getMyFeed:function(){var a=d.feedServer+"/feed/ungrouped/myfeed",c={};return c.userId=b.getActiveUser(),f(a,c)},getSearchFeed:function(a){var c=d.feedServer+"/feed",e={query:a};return e.userId=b.getActiveUser(),f(c,e)},getContent:function(a){var c=d.feedServer+"/feed/content",e={};return e.userId=b.getActiveUser(),e.targetId=a,f(c,e)},getFeedByAuthor:function(a){var c=d.feedServer+"/feed/ungrouped/explore",e={userId:b.getActiveUser(),authorId:a};return f(c,e)}}}]),angular.module("webApp").factory("FollowService",["$http","LoginService","configuration",function(a,b,c){var d={};d.followData={user:{},topic:{}},d.muteData={user:{},topic:{}},d.userTopicsList={},d.userTopicsCount=0;var e={};e.data=d,e.registerFollow=function(a,b,c){d.followData[a][b]=c},e.registerMute=function(a,b,c){d.muteData[a][b]=c},e.registerMetadata=function(a){angular.forEach(a.userFollows,function(a,b){e.registerFollow("user",b,a)}),angular.forEach(a.topicFollows,function(a,b){e.registerFollow("topic",b,a)}),angular.forEach(a.userMutes,function(a,b){e.registerMute("user",b,a)}),angular.forEach(a.topicMutes,function(a,b){e.registerMute("topic",b,a)})},e.getFollowValues=function(a){return d.followData[a]||(d.followData[a]={}),d.followData[a]},e.getMuteValues=function(a){return d.muteData[a]||(d.muteData[a]={}),d.muteData[a]},e.refreshUserTopics=function(){return a.get(c.userInteractionServer+"/followings/"+b.userId()+"/topics").then(function(a){d.userTopicsCount=Object.keys(a.data.topics).length,d.userTopicsObject=a.data.topics,d.userTopicsList=[],angular.forEach(a.data.topics,function(a){d.userTopicsList.push(a)})})};var f=function(d,f,g,h,i){g||(h=i),console.log(h+": "+d+"/"+f);var j=c.userInteractionServer+"/followings/"+b.userId()+"/"+h+"/"+d+"/";return a.post(j,f).then(function(a){return console.log(a.data),e.registerFollow(d,f,a.data.isFollowing),e.registerMute(d,f,a.data.isMuted),e.refreshUserTopics(),a.data})};return e.followTarget=function(a,b,c){return f(a,b,c,"follow","unfollow")},e.muteTarget=function(a,b,c){return f(a,b,c,"mute","unmute")},e}]),angular.module("webApp").factory("HttpInterceptor",["$q",function(a){var b=function(){return Parse&&Parse.User&&Parse.User.current()?Parse.User.current().getSessionToken():!1};return{request:function(a){return b()&&(a.headers["X-Parse-Session-Token"]=b()),a},requestError:function(b){return a.reject(b)},response:function(a){return a},responseError:function(b){return a.reject(b)}}}]),angular.module("webApp").factory("ImageService",["configuration",function(a){var b={};return b.getUrl=function(a){return"https://res.cloudinary.com/parlio/image/upload/"+a+".png"},b.uploadImagePath=function(){return a.feedServer+"/images/upload"},b.dataURItoBlob=function(a){for(var b=atob(a.split(",")[1]),c=a.split(",")[0].split(":")[1].split(";")[0],d=[],e=0;e<b.length;e++)d.push(b.charCodeAt(e));return new Blob([new Uint8Array(d)],{type:c})},b}]),angular.module("webApp").factory("InviteService",["configuration","$http","UserService",function(a,b,c){var d={};return d.deleteCode=function(c){var d=a.userProfileServer+"/invites/"+c;return b["delete"](d).then(function(a){return a.data})},d.getList=function(c,d,e){var f=a.userProfileServer+"/invites/list",g={term:c,emailStatus:d,skip:e};return b.get(f,{params:g}).then(function(a){return console.log(a.data),a.data})},d.getGroupCounts=function(){var c=a.userProfileServer+"/invites/group-counts";return b.get(c).then(function(a){return console.log(a.data),a.data})},d.attemptedSignup=function(c,d){var e=a.userProfileServer+"/invites/attempt-signin",f={name:c,email:d};return b.post(e,null,{params:f}).then(function(a){return a.data})},d.requestInvite=function(c){var d=a.userProfileServer+"/invites/request-invite";return b.post(d,c).then(function(a){return a.data})},d.updateInvite=function(c,d,e,f){var g={generatedFor:d,generatedForEmail:e,context:f},h=a.userProfileServer+"/invites/"+c;return b.put(h,null,{params:g}).then(function(a){return a.data})},d.generateNew=function(d,e,f){var g={userId:c.getActiveUser(),generatedFor:d,generatedForEmail:e,context:f},h=a.userProfileServer+"/invites";return b.post(h,null,{params:g}).then(function(a){return a.data})},d.sendEmail=function(c){var d=a.userProfileServer+"/invites/send-email";return b.post(d,c).then(function(a){return a.data})},d.getInviteText=function(c){var d=a.userProfileServer+"/invites/text/";return d+=c?"reinvite":"invite",b.get(d).then(function(a){return a.data})},d}]),angular.module("webApp").factory("LoginService",["ParseSDK","$location","$state","$window","configuration","$http","$q","$sanitize","DeviceService",function(a,b,c,d,e,f,g,h,i){var j={};j.getSessionToken=function(){return Parse&&Parse.User&&Parse.User.current()?Parse.User.current().getSessionToken():!1},j.isSignedIn=function(){return Parse&&Parse.User&&Parse.User.current()?!0:!1},j.userId=function(){return j.isSignedIn()?Parse.User.current().getUsername():!1},j.isWhitelisted=function(){return j.isSignedIn()?Parse.User.current().attributes.isWhitelisted:!1},j.attemptWhitelist=function(a){if(Parse&&Parse.User&&Parse.User.current()){var b=e.userProfileServer+"/invites/use",c={};return c.parseSessionId=Parse.User.current().getSessionToken(),c.userId=j.userId(),c.code=a,console.log(c),f.post(b,null,{params:c}).then(function(a){return console.log(a.data),a.data})}},j.refreshUser=function(){return Parse&&Parse.User&&Parse.User.current()?Parse.User.current().fetch():void 0},j.isAdmin=function(){return j.isSignedIn()?Parse.User.current().attributes.isAdmin:!1},j.canSeeApp=function(){return j.isSignedIn()&&j.isWhitelisted()},j.logout=function(){Parse.User.logOut()},j.doFBLogin=function(){if(i.isCordova()){var a=new Parse.Promise,b=function(d){if(!d.authResponse)return void c("Cannot find the authResponse");var e=new Date((new Date).getTime()+1e3*d.authResponse.expiresIn).toISOString(),f={id:String(d.authResponse.userID),access_token:d.authResponse.accessToken,expiration_date:e};a.resolve(f),b=null,console.log(d)},c=function(b){a.reject(b)};return window.cordova||facebookConnectPlugin.browserInit(e.facebookAppId),facebookConnectPlugin.login(["email"],b,c),a.then(function(a){return console.log("Promised"),Parse.FacebookUtils.logIn(a)})}return Parse.FacebookUtils.logIn("email",{success:function(a){console.log(a.existed()?"User logged in through Facebook!":"User signed up and logged in through Facebook!"),Parse.User.current().save()},error:function(){console.log("User cancelled the Facebook login or did not fully authorize.")}})},j.startLinkedInAuth=function(a,b){var e=j.generateStateString("LinkedIn",a,b);if(console.log("STATE",e),i.isCordova()){var f=window.open(j.getLinkedInAuthUrl(a,e),"_blank","location=no");f.addEventListener("loadstart",function(a){if(a.url.indexOf("?code=")>=0&&a.url.match(/=[^]+&/)){var b=a.url.match(/=[^]+&/)[0].substring(1).replace("&","");f.close(),c.go("login",{code:b,state:e})}})}else{{d.location.origin+c.href("login")}d.location.href=j.getLinkedInAuthUrl(e)}},j.generateStateString=function(a,b,c){var d=["PARLIO_LOGIN",a,b,c];return d.join(",")},j.unpackState=function(a){var b=a.split(",");return{source:b[1],invite:b[2],redirect_to:b[3]}},j.continueOAuth=function(a,b){var c=g.defer(),d=h(k()),e=j.unpackState(b),f={authCode:a,redirectUrl:d};return Parse.Cloud.run("loadLinkedInMemberByToken",f,{success:function(a){Parse.User.become(a).then(function(a){console.log(a.existed()?"User logged in through LinkedIn!":"User signed up and logged in through LinkedIn!"),c.resolve(e)},function(a){console.log("User cancelled LinkedIn or did not fully authorize"),c.reject(a)})},error:function(a){console.log("ERROR: ",a)}}),c.promise};var k=function(){var a=d.location.origin+d.location.pathname;return i.isCordova()&&(a=e.linkedInRedirectUrl),a};return j.getLinkedInAuthUrl=function(a){var b=k();return"https://www.linkedin.com/uas/oauth2/authorization?response_type=code&client_id="+e.linkedInApiKey+"&scope=r_fullprofile,r_emailaddress&state="+a+"&redirect_uri="+h(b)},j}]),angular.module("webApp").factory("NotificationService",["$http","$state","$location","UserService","configuration",function(a,b,c,d,e){var f=function(a,b){return a&&a.substring(0,b.length)===b},g={};return g.data={},g.loadNotificationCount=function(){var b=e.userProfileServer+"/notifications/count/"+d.getActiveUser();return a.get(b).then(function(a){return g.data.notificationCount=a.data.count,g.data.notificationCountBrackets=void 0,g.data.notificationCount&&(g.data.notificationCountBrackets="("+g.data.notificationCount+")"),a.data})},g.resetNotifications=function(){var b=e.userProfileServer+"/notifications/reset-count/"+d.getActiveUser();return a.post(b).then(function(a){return g.loadNotificationCount(),a.data})},g.loadNotifications=function(){var b=e.userProfileServer+"/notifications/"+d.getActiveUser();return a.get(b).then(function(a){g.data.notifications=a.data})},g.markNotificationById=function(b,c){var d=e.userProfileServer+"/notifications/mark",f={notificationId:b,unread:c};return a.post(d,f).then(function(a){return g.loadNotificationCount(),a.data})},g.markNotificationByTarget=function(b){var c=e.userProfileServer+"/notifications/mark-target",f={targetId:b,userId:d.getActiveUser()};return a.post(c,f).then(function(a){return g.loadNotificationCount(),a.data})},g.getNotificationById=function(b){var c=e.userProfileServer+"/notifications/load/"+b;return a.get(c).then(function(a){return a.data})},g.getNotificationUrl=function(a){var e="profile",g={},h={};return f(a.targetId,"Bite/")&&(e="content",g.id=a.targetId.split("/",2)[1]),f(a.targetId,"Comment/")&&(e="comment",g.id=a.targetId.split("/",2)[1]),"FOLLOWED_YOU"===a.notificationType&&(e="profile.followers",g.userId=d.getActiveUser()),"INVITED_TO_DISCUSS"==a.notificationType&&(e="content",g.id=a.targetId.split("/",2)[1]),b.href(e,g)===c.path()&&(h.reload=!0),b.href(e,g,h)},g}]),angular.module("webApp").factory("OnboardingService",["$modal","$q","UserService","TopicService","FollowService",function(a,b,c,d,e){var f={},g=3,h=function(c,d,e,f){return c?a.open({templateUrl:"app/modals/onboardingFollowCategoriesModal/onboardingFollowCategoriesModal.html",controller:"OnboardingFollowCategoriesModalCtrl",backdrop:"static",keyboard:!1,windowClass:"onboarding-follow-categories-modal",backdropClass:"content-form-backdrop",resolve:{categories:function(){return d},numRequiredCategories:function(){return g},step:function(){return e},totalSteps:function(){return f}}}).result:b.when()},i=function(c,d,e,f){return c?a.open({templateUrl:"app/modals/onboardingProfileModal/onboardingProfileModal.html",controller:"OnboardingProfileModalCtrl",backdrop:"static",keyboard:!1,windowClass:"onboarding-profile-modal",backdropClass:"content-form-backdrop",resolve:{user:function(){return d},step:function(){return e},totalSteps:function(){return f}}}).result:b.when()},j=function(){var a={};a.completedOnboardingVersion=1,c.updateCurrentUser(a).then(function(){})};return f.isFollowsMinRequired=function(a){var b=e.getFollowValues("topic"),c=0;for(var d in a)if(b[d]&&(c++,c>=g))return!0;return!1},f.numFollowed=function(a){var b=e.getFollowValues("topic"),c=0;for(var d in a)b[d]&&c++;return c},f.launchOnboarding=function(){c.getSelfUser().then(function(a){a.completedOnboardingVersion&&a.completedOnboardingVersion>=1||d.getCategories().then(function(b){var c=!f.isFollowsMinRequired(b),d=c||!a.title||!a.image,e=c&&d?2:c||d?1:0;h(c,b,1,e).then(function(){return i(d,a,Math.min(2,e),e)}).then(function(){return j()})})})},f}]),angular.module("webApp").factory("ParseSDK",["configuration",function(a){return Parse.initialize(a.parseId,a.parseKey),window&&window.fbPromise&&window.fbPromise.then(function(){Parse.FacebookUtils.init({appId:a.facebookAppId,status:!0,cookie:!0,xfbml:!0})}),function(){}}]),angular.module("webApp").factory("TopicAdminService",["$http","configuration",function(a,b){return{add:function(c){var d=b.userInteractionServer+"/topics/admin",e={id:c};return a.post(d,e).then(function(a){return a.data})},search:function(c,d,e){var f=b.userInteractionServer+"/topics/admin",g={term:c,hideRejected:d,hideVerified:e};return a.get(f,{params:g}).then(function(a){return a.data})},update:function(c){var d=b.userInteractionServer+"/topics/admin/"+c.id;return a.put(d,c).then(function(a){return a.data})}}}]),angular.module("webApp").factory("TopicService",["$http","configuration","FollowService","UserService",function(a,b,c,d){var e={LOCATION:{name:"Location",image:"assets/images/tag-icons/c4ef9a59.location.svg"},EVENT:{name:"Event",image:"assets/images/tag-icons/4f6c8dce.event.svg"},CATEGORY:{name:"Category",image:"assets/images/tag-icons/c7d637a9.category.svg"},ORGANIZATION:{name:"Organization",image:"assets/images/tag-icons/19d32c79.organization.svg"},PERSON:{name:"Person",image:"assets/images/tag-icons/2bf275a5.person.svg"},TOPIC:{name:"Topic",image:"assets/images/tag-icons/832c0d78.topic.svg"}},f={art_culture:"assets/images/category-icons/87873294.icon-art_culture.svg",business:"assets/images/category-icons/3163391c.icon-business.svg",economy:"assets/images/category-icons/1fd3b457.icon-economy.svg",education:"assets/images/category-icons/62b60ba4.icon-education.svg",environment:"assets/images/category-icons/3ae3ac84.icon-environment.svg",entertainment:"assets/images/category-icons/ca34c690.icon-entertainment.svg",health:"assets/images/category-icons/3f7a727a.icon-health.svg",misc:"assets/images/category-icons/546313e4.icon-misc.svg",politics:"assets/images/category-icons/3417382a.icon-politics.svg",science:"assets/images/category-icons/077bb144.icon-science.svg",sports:"assets/images/category-icons/0b3f58b8.icon-sports.svg",technology:"assets/images/category-icons/db03ec08.icon-technology.svg"};return{autoComplete:function(c){var d=b.userInteractionServer+"/topics/autocomplete",e={term:c};return a.get(d,{params:e}).then(function(a){return a.data})},getTrending:function(){var c=b.userInteractionServer+"/topics/trending";return a.get(c).then(function(a){return a.data})},types:function(){return e},getImageForType:function(a){var b=null;return e[a]&&e[a].image&&(b=e[a].image),b},getCategories:function(){var e=b.userInteractionServer+"/followings/categories",f={};return f.userId=d.getActiveUser(),a.get(e,{params:f}).then(function(a){return c.registerMetadata(a.data.followMetadata),a.data.topics})},getExternalTopics:function(c){var d=b.userInteractionServer+"/topics/batch";return a.post(d,c).then(function(a){return console.log(a.data),a.data})},getFollowers:function(e){var f=b.userInteractionServer+"/followers/topic/"+e,g={userId:d.getActiveUser()};return a.get(f,{params:g}).then(function(a){return c.registerMetadata(a.data.followMetadata),a.data})},getStatistics:function(e){var f=b.userInteractionServer+"/topics/statistics",g={topic:e,userId:d.getActiveUser()};return a.get(f,{params:g}).then(function(a){return c.registerFollow("topic",e,a.data.isFollowed),c.registerMute("topic",e,a.data.isMuted),a.data})},sanitize:function(a){return a.toLowerCase().trim().replace(/[^\s\w]/gi,"").replace(/\s/gi,"_").replace(/_+/gi,"_")},getCategoryImageUrl:function(a){var b=f[a];return b||(b="assets/images/category-icons/546313e4.icon-misc.svg"),b}}}]),angular.module("webApp").service("UserCommunicationService",["$window","$q","configuration",function(){var a={},b=[];return a.getErrors=function(){return b},a.addErrorByText=function(a){b.push({text:a})},a.clearErrors=function(){b.length=0},a}]),angular.module("webApp").factory("UserInteractionService",["$http","configuration","FollowService","UserService",function(a,b,c,d){var e={};return e.getProfileInteractions=function(c){var d=b.userInteractionServer+"/profileInteractions",e={};return e.userId=c,a.get(d,{params:e}).then(function(a){return console.log(a.data),a.data})},e.searchUsers=function(e,f){var g=b.userInteractionServer+"/userstats/search",h={term:e,userId:d.getActiveUser(),skip:f};return a.get(g,{params:h}).then(function(a){return c.registerMetadata(a.data.followMetadata),a.data})},e.getRecommendedTopics=function(e,f){var g=b.userInteractionServer+"/recommendations/topics",h={userId:d.getActiveUser(),skip:e,seed:f};return a.get(g,{params:h}).then(function(a){return c.registerMetadata(a.data.followMetadata),a.data})},e.getRecommendedUsers=function(e,f){var g=b.userInteractionServer+"/recommendations/users",h={userId:d.getActiveUser(),skip:e,seed:f};return a.get(g,{params:h}).then(function(a){return c.registerMetadata(a.data.followMetadata),a.data})},e.getComment=function(c){var d=b.userInteractionServer+"/comments/"+c,e={};return a.get(d,{params:e}).then(function(a){return console.log(a.data),a.data})},e.promptToDiscuss=function(c,d,e){var f=b.userInteractionServer+"/discussion_prompts",g=Parse.User.current(),h=null;g&&(h=g.getUsername());var i={userId:h,targetId:c,message:d,inviteeId:e};return a.post(f,i).then(function(a){return a.data})},e}]),angular.module("webApp").factory("UserService",["$http","ParseSDK","configuration","FollowService",function(a,b,c,d){var e={},f={},g={};return e.userData=g,e.updateCurrentUser=function(b){var d=Parse.User.current();b.parseSessionId=d.getSessionToken();var e=c.userProfileServer+"/users/update/"+Parse.User.current().getUsername();return a.put(e,b).then(function(a){return a.data})},e.getActiveUser=function(){var a=Parse.User.current();return a?a.getUsername():null},e.getActiveUserEmail=function(){var a=Parse.User.current();return a?a.getEmail():null},e.getActiveUserName=function(){var a=Parse.User.current();return a?a.attributes.profile.name:null},e.getCommentCount=function(b){var d=c.userInteractionServer+"/comments/batch-counts",f={activeUserId:e.getActiveUser(),ids:[b]};return a.post(d,f).then(function(a){return console.log(),a.data.countData[b]})},e.getReactionList=function(b,d){var f=c.userInteractionServer+"/reactions/list/"+b+"/"+d,g={userId:e.getActiveUser()};return a.get(f,{params:g}).then(function(a){return a.data})},e.viewContent=function(b){if(!f[b]){var d=c.userInteractionServer+"/views/"+b+"/"+e.getActiveUser();return f[b]=!0,a.post(d).then(function(a){return a.data})}},e.deleteComment=function(b){var d=c.userInteractionServer+"/comments/"+b,f={userId:e.getActiveUser()};return a["delete"](d,{params:f}).then(function(a){return a.data})},e.addComment=function(b,d,f){var g=c.userInteractionServer+"/comments",h={userId:e.getActiveUser(),targetId:b,comment:d,mentions:f};return a.post(g,h).then(function(a){return a.data})},e.editComment=function(b){var d=c.userInteractionServer+"/comments/"+b.id;return console.log("The Mentions before the put"+b.mentions),a.put(d,b).then(function(a){return a.data})},e.getComments=function(b){var d=c.userInteractionServer+"/comments/"+b,f={userId:e.getActiveUser()};return a.get(d,{params:f}).then(function(a){return a.data})},e.reactToContent=function(b,d,f){var g;if(f){var h={userId:e.getActiveUser(),reaction:d,targetId:b};return g=c.userInteractionServer+"/reactions",a.post(g,h).then(function(a){return a.data})}return g=c.userInteractionServer+"/reactions/"+b+"/"+e.getActiveUser()+"/"+d,a["delete"](g).then(function(a){return a.data})},e.followTopic=function(b,d){var f="unfollow";d&&(f="follow");var g=c.userInteractionServer+"/followings/"+e.getActiveUser()+"/"+f+"/topic/";return a.post(g,b).then(function(a){return a.data})},e.getUsers=function(b){var d=c.userProfileServer+"/users/batch";return a.post(d,b).then(function(a){return a.data})},e.getUser=function(b){var d=c.userProfileServer+"/users/batch";return a.post(d,new Array(b)).then(function(a){return a.data[0]})},e.getSelfUser=function(){var b=c.userProfileServer+"/users/get-self";return a.get(b).then(function(a){return a.data})},e.autoComplete=function(b,d,e){d=d||!1;var f=c.userInteractionServer+"/userstats/autocomplete",g={term:b,selfFiltered:d,userId:e};return a.get(f,{params:g}).then(function(a){return a.data})},e.getUserTopics=function(b){var f=c.userInteractionServer+"/followings/"+b+"/topics",g={userId:e.getActiveUser()};return a.get(f,{params:g}).then(function(a){return d.registerMetadata(a.data.followMetadata),a.data})},e.getUserFollowings=function(b){var f=c.userInteractionServer+"/followings/"+b+"/users",g={userId:e.getActiveUser()};return a.get(f,{params:g}).then(function(a){return d.registerMetadata(a.data.followMetadata),a.data})},e.getUserFollowers=function(b){var f=c.userInteractionServer+"/followers/user/"+b,g={userId:e.getActiveUser()};return a.get(f,{params:g}).then(function(a){return console.log("FOLLOWERS",a.data),d.registerMetadata(a.data.followMetadata),a.data})},e}]),angular.module("webApp").controller("SettingsCtrl",["$scope","$location","$state","$timeout","$modal","UserService","segmentio",function(a,b,c,d,e,f,g){a.currentUserId=f.getActiveUser(),f.getSelfUser().then(function(b){a.user=b}),a.canSubmit=!0,a.updateUser=function(){var b={};a.canSubmit=!1,b.title=a.user.title,b.bio=a.user.bio,b.email=a.user.email,b.image=a.user.image,b.receiveDailyEmails!==a.user.receiveDailyEmails&&g.track("Email Setting Change",{receive:a.user.receiveDailyEmails}),b.receiveDailyEmails=a.user.receiveDailyEmails,f.updateCurrentUser(b).then(function(b){a.user=b,a.canSubmit=!0,c.go("profile",{userId:a.currentUserId})})}}]),angular.module("webApp").config(["$stateProvider",function(a){a.state("settings",{url:"/settings",templateUrl:"app/settings/settings.html",controller:"SettingsCtrl",title:"My Settings"})}]),angular.module("webApp").controller("TopicCtrl",["$scope","$state","$stateParams","FeedService","TopicService",function(a,b,c,d,e){a.data||(a.data={});var f=c.topic;a.activeTopic=f,e.getStatistics(f).then(function(b){a.data.stats=b})}]).controller("TopicFeedCtrl",["$scope","$state","$stateParams","FeedService",function(a,b,c,d){a.data.feed={},d.getExploreFeed(a.activeTopic).then(function(b){a.data.feed=b})}]).controller("TopicFollowersCtrl",["$scope","$state","$stateParams","FeedService","TopicService",function(a,b,c,d,e){a.data.feed={},e.getFollowers(a.activeTopic).then(function(b){a.data.userList=b})}]),angular.module("webApp").config(["$stateProvider",function(a){a.state("abstractTopic",{"abstract":!0,url:"/topic/:topic",templateUrl:"app/topic/topic.html",controller:"TopicCtrl"}).state("topic",{url:"",parent:"abstractTopic",templateUrl:"app/feed/feed.html",controller:"FeedCtrl"}).state("topic.followers",{url:"/followers",parent:"abstractTopic",templateUrl:"app/profile/profile.users.html",controller:"TopicFollowersCtrl"})}]),angular.module("webApp").controller("TopnavCtrl",["$rootScope","$scope","UserService","LoginService","TopicService","FeedService","$window","$location","$timeout","$state",function(a,b,c,d,e,f,g,h,i,j){b.menuCollapsed=!0,b.functions={},b.data={},b.navTitle="",a.$on("$stateChangeStart",function(a,c){b.navTitle=c.title}),b.isAdmin=d.isAdmin(),d.refreshUser(),b.functions.autoComplete=function(a){var b=[],d={};return d.label="Find posts for '"+a+"'",d.value=a,d.state="search",d.params={q:a},b.push(d),e.autoComplete(a).then(function(d){return angular.forEach(d,function(a){a.state="topic",a.params={topic:a.value},a.label=""+a.label,a.image="CATEGORY"===a.type?e.getCategoryImageUrl(a.value):e.getImageForType(a.type),b.push(a)}),c.autoComplete(a).then(function(a){return angular.forEach(a,function(a){a.state="profile",a.params={userId:a.value},b.push(a)}),b})})},b.functions.topSelect=function(a){b.data.topSearch="",j.go(a.state,a.params)}}]),angular.module("webApp").controller("UservoiceCtrl",["$scope","UserService",function(a,b){a.identify={id:b.getActiveUser(),email:b.getActiveUserEmail()}
}]),angular.module("services.config",[]).constant("configuration",{parseId:"mkKOJKKjNBMMMdjgRGjO52OFDJdfZHDDyqe7x7pz",parseKey:"lckanL2PULzMGTW5zg8Cr0gaAN33GQXC8cId7Ixn",parseClientKey:"@@parseClientKey",parseRestKey:"@@parseRestKey",feedServer:"https://parlio-feed-staging.herokuapp.com/application",userInteractionServer:"https://parlio-interaction-staging.herokuapp.com/application",userProfileServer:"https://parlio-user-profile-staging.herokuapp.com/application",contentServer:"https://parlio-content-staging.herokuapp.com/application",facebookAppId:"889975234365372",linkedInRedirectUrl:"@@linkedInRedirectUrl",segmentioKey:"tQE4HcslOK",linkedInApiKey:"755889j234bhi3",cordova:"false",hockeyAppIdIOS:"@@hockeyAppIdIOS",hockeyAppIdAndroid:"@@hockeyAppIdAndroid"}),angular.module("webApp").run(["$templateCache",function(a){a.put("app/cms/cms.html","<div class=product-version id=parlio-product-version></div><div><iframe bi-frame-set-dimensions-on-load class=cmsFrame frameborder=0 height=1400 width=100% seamless ng-src={{trustedFrameUrl}}></iframe></div>"),a.put("app/content/content.html",'<span bi-content users=data.contentResponse.users content=data.contentResponse.contentList[0] topics=data.contentResponse.topics></span><div class="panel comment-box" ng-if=data.contentResponse.contentList[0]><div class="panel-heading comment-count">{{data.commentCount.count || 0}} comment<span ng-show="data.contentResponse.contentList[0].interactionData.commentData.count != 1">s</span> <a class=prompt-user ng-click=openDiscussionPrompt()>Invite Member To Comment</a></div><div class="panel-body content-box-wrapper"><a id=comment{{commentWrapper.comment.id}}></a><div ng-repeat="commentWrapper in data.commentResponse.commentWrappers" class=content-box id=comment{{commentWrapper.comment.id}} ng-class="{true: \'highlight\'} [data.activeComment == commentWrapper.comment.id]"><a id=comment{{commentWrapper.comment.id}}></a> <span bi-comment users=data.commentResponse.users comment-wrapper=commentWrapper on-delete=updateComments()></span></div><div class=form-group><form ng-submit="addComment(data.commentText, userTags)"><textarea bi-user-taggable user-tags=userTags placeholder=Comment... type=text class=form-control rows=2 id=comment ng-model=data.commentText ng-model-options="{updateOn: \'change default blur focus\'}" bi-change-in-progress></textarea><div class="button-submit pull-right"><button type=submit class="btn btn-warning" id=commentSubmit ng-disabled="!data.commentText.length || submitInProgress">Submit</button></div></form></div></div></div>'),a.put("app/control/control.html",'<ul class="nav nav-pills"><li role=presentation ui-sref-active=active><a ui-sref=control.invites>Invites</a></li><li role=presentation ui-sref-active=active><a ui-sref=control.topics>Topics</a></li><li role=presentation ui-sref-active=active><a ui-sref=control.posts>Posts</a></li></ul><br><br><ui-view></ui-view>'),a.put("app/control/invites/invites.html",'<div><div class=h4>Invite users</div><form role=form><div class=form-group><label for=inviteFor>Invite</label><input class=form-control id=inviteFor ng-model=generatedFor placeholder="For? (just a reminder - exact name doesn\'t need to match)"> <input type=email class=form-control id=inviteForEmail ng-model=generatedForEmail placeholder="Email address (only required if you want to email them)"> <input class=form-control id=inviteContext ng-model=context placeholder="Context (just something to remember the person by)"></div><button type=submit class="btn btn-default" ng-click="generateNew(generatedFor, generatedForEmail, context)">Submit</button></form><div class="form-inline members-search" role=form><div class=form-group><div class=input-group><div class=input-group-addon><span class="glyphicon glyphicon-filter"></span></div><input ng-model=data.searchTerm ng-change=updateList(true) class=form-control placeholder=Filter></div><div class=btn-group ng-click=updateList(true)><label class="btn btn-primary" ng-model=data.statusFilter btn-radio=undefined>ALL</label><label class="btn btn-primary" ng-model=data.statusFilter btn-radio="\'INVITED\'">Invited ({{data.groupCounts[\'INVITED\']}})</label><label class="btn btn-primary" ng-model=data.statusFilter btn-radio="\'NOT_EMAILED\'">Not emailed ({{data.groupCounts[\'NOT_EMAILED\']}})</label><label class="btn btn-primary" ng-model=data.statusFilter btn-radio="\'REINVITED\'">Reinvited ({{data.groupCounts[\'REINVITED\']}})</label><label class="btn btn-primary" ng-model=data.statusFilter btn-radio="\'REGISTERED\'">Registered ({{data.groupCounts[\'REGISTERED\']}})</label></div></div></div><span ng-if=data.cursor.more><a ng-click=data.getMore()>Next >></a>{{data.cursor.more}} remaining</span><table class="table table-striped"><tr><th>Code</th><th>Generated for</th><th>Email Status</th><th>Date</th><th>Generated by</th><th>Used</th><th>Actions</th></tr><tr ng-repeat="invite in data.inviteList"><td><input value={{invite.code}} style="width: 5em"><span class="glyphicon glyphicon-pencil" style="float: right" ng-click="data.inviteEditing[invite.code] = true"></span></td><td><span ng-show=!data.inviteEditing[invite.code]><span ng-if=invite.generatedFor>{{invite.generatedFor}}<br></span> <span ng-if=invite.generatedForEmail>({{invite.generatedForEmail || \'no email\'}})<br></span> <span ng-if=invite.context>({{invite.context}})<br></span> <span ng-if=invite.inviteSource>({{invite.inviteSource}})</span></span> <span ng-if=data.inviteEditing[invite.code]><input ng-model=invite.generatedFor><br><input type=email ng-model=invite.generatedForEmail><br><input ng-model=invite.context><br><button class="btn btn-default" ng-click="editInvite(invite.code, invite.generatedFor, invite.generatedForEmail, invite.context)">Edit</button></span></td><td>{{invite.emailStatus}}<br><span class=light ng-show=invite.inviteEmails>{{invite.inviteEmails.length}} total emails sent</span></td><td><span ng-if=invite.lastActionAt am-time-ago=invite.lastActionAt></span></td><td><a ui-sref="profile({userId: invite.generatedBy})" target=_blank ng-if="invite.inviteSource == &quot;ADMIN_INVITE&quot;">({{invite.generatedBy == data.activeUserId ? \'you\' : \'-\'}})</a> <span ng-if="invite.inviteSource != &quot;ADMIN_INVITE&quot;">{{invite.inviteSource}}</span></td><td><a ui-sref="profile({userId: invite.usedBy})"><span ng-if=invite.usedAt am-time-ago=invite.usedAt></span></a><br>{{data.userMap[invite.usedBy].name}}<br>{{data.userMap[invite.usedBy].email}}</td><td><a class=invite-action ng-click=deleteCode($index) ng-show=!invite.usedBy><span class="glyphicon glyphicon-trash"></span> delete<br></a> <a class=invite-action ng-click="inviteEmail(invite, false)" ng-show="invite.emailStatus == \'NOT_EMAILED\'"><span class="glyphicon glyphicon-envelope"></span> invite<br></a> <a class=invite-action ng-click="inviteEmail(invite, true)" ng-show="invite.emailStatus == \'INVITED\' || invite.emailStatus == \'REINVITED\'"><span class="glyphicon glyphicon-repeat"></span> re-invite<br></a></td></tr></table><span ng-if=data.cursor.more><a ng-click=data.getMore()>Next >></a>{{data.cursor.more}} remaining</span></div>'),a.put("app/control/posts/posts.html",'<a ng-click=getMore()>More >></a><br><br><table class=table><tr ng-repeat="content in contentList"><!-- <td>{{content.userId}}</td> --><td><a ui-sref="content({id: content.id})" target=_blank>{{content.text}}</a></td><td><span ng-repeat="topic in content.topics track by $index">{{topic}} <a ng-click="removeTopic($index, content)">(x)</a><br></span></td><td><select ng-change="changeSelect(categorySelect[content.id], content)" ng-model=categorySelect[content.id]><option></option><option ng-repeat="category in categories" value={{category}} ng-selected="categoryInTags(category, content.topics)">{{category}}</option></select></td><td><input ng-model=newTag typeahead-wait-ms=100 class=form-control placeholder="add tag" typeahead="entry.path as entry.label for entry in autoComplete($viewValue)" typeahead-on-select="addTopic($item, content)" style="width: 100px"></td></tr></table>'),a.put("app/control/topics/topics.html",'<div class="form-inline topic-search" role=form><form class=form-group><div class=input-group><div class=input-group-addon><span class="glyphicon glyphicon-filter"></span></div><input ng-model=data.topicSearch ng-change=data.searchForTopic() class=form-control placeholder=Filter></div><input class=btn type=submit ng-click=data.addNewTopic(data.topicSearch) value="Add New"></form></div><br>Filter:&nbsp;&nbsp; <span class=btn-group><label class="btn btn-success" ng-model=pendingFilter btn-radio=true ng-change=data.searchForTopic() uncheckable>Pending Only</label></span><br><br><div class="panel topic-table-wrapper"><table class="table topic-table"><tr class=topic-row><th class=topic-cell>Name<br>(Id) <span class="glyphicon glyphicon-question-sign" tooltip="tag id can\'t change - you will need to create a new tag"></span></th><th class=topic-cell>Type</th><th class=topic-cell>Status</th></tr><tr class="topic-row {{data.topicClass(topic)}}" ng-repeat="topic in data.topics"><td class=topic-cell><span ng-show=!data.topicEditing[topic.id]>{{topic.displayNames[0]}}</span> <input ng-model=topic.displayNames[0] ng-show=data.topicEditing[topic.id] ng-blur="data.updateTopic(topic)"> <span class="glyphicon glyphicon-pencil edit-icon" ng-click="data.topicEditing[topic.id] = true"></span><br>({{topic.id}})</td><td class=topic-cell><select ng-options="type_id as type.name for (type_id, type) in data.types" ng-model=topic.type ng-change=data.updateTopic(topic)></select></td><td class="topic-cell verify-buttons"><div class="btn-group control-buttons" role=group><button type=button ng-class="{disabled: !topic.type}" class="btn btn-default green" ng-change=data.updateTopic(topic) ng-model=topic.verifiedStatus btn-radio="\'VERIFIED\'">Accept</button> <button type=button class="btn btn-default" ng-change=data.updateTopic(topic) ng-model=topic.verifiedStatus btn-radio="\'PENDING\'">Pending</button> <button type=button class="btn btn-default red" ng-change=data.updateTopic(topic) ng-model=topic.verifiedStatus btn-radio="\'REJECTED\'">Reject</button></div></td><td class=topic-cell><a ui-sref="topic({topic: topic.id})" ng-if=topic.stats.posts>{{topic.stats.posts || 0}} posts</a></td></tr></table></div><div class=more-bar ng-show=data.userSearch.cursor.more ng-click=data.getMore()><a>{{data.userSearch.cursor.more}} more results</a> {{data.cursorNextSkip}}</div>'),a.put("app/directives/biComment/biComment.html",'<div class="media single-comment" ng-class="{deleted: deleting}" ng-show=!deleted><div class=comment-author-image bi-stats-hover=user stats-target=users[commentWrapper.comment.userId]><a class=pull-left bi-user-link user=users[commentWrapper.comment.userId]><img class="media-object profile-image" ng-src={{users[commentWrapper.comment.userId].image}}></a></div><div class=comment-body><div class="pull-right dropdown comment-edit-button" dropdown ng-show="(activeUser == commentWrapper.comment.userId)"><a dropdown-toggle><span class="glyphicon glyphicon-chevron-down comment-chevron"></span></a><ul class=dropdown-menu><li ng-click=editCommentToggle() ng-show="(activeUser == commentWrapper.comment.userId)"><a href>Edit</a></li><li ng-click=deleteComment() ng-show="(activeUser == commentWrapper.comment.userId)"><a href>Delete</a></li></ul></div><span bi-stats-hover=user stats-target=users[commentWrapper.comment.userId]><span class="light comment-time pull-right" am-time-ago=commentWrapper.comment.createdAt></span> <a bi-user-link user=users[commentWrapper.comment.userId]>{{users[commentWrapper.comment.userId].name}}</a></span><br><span class="media-heading heading-description light" ng-show=users[commentWrapper.comment.userId].title>{{users[commentWrapper.comment.userId].title}}</span><div class=comment-text ng-hide=isEditing bi-highlight-mentions=commentWrapper.comment.mentions ng-bind=commentWrapper.comment.comment></div><div class=form-group ng-if=isEditing><form ng-submit=updateEditedComment()><textarea bi-user-taggable user-tags=commentWrapper.comment.mentions type=text class=form-control rows=2 id=comment ng-model=commentWrapper.comment.comment ng-model-options="{updateOn: \'change default blur focus\'}" bi-change-in-progress></textarea><div class="button-submit pull-right"><button type=submit class="btn btn-warning" id=commentSubmit ng-disabled=!commentWrapper.comment.comment>Submit</button></div></form></div><div class=comment-upvote><div bi-reaction-button text=Upvote reaction=UPVOTE reaction-data=commentWrapper.reactionData target-id={{commentWrapper.targetId}}></div></div></div></div>'),a.put("app/directives/biContent/biContent.html",'<div class=main-content ng-if=contentWrapper in-view=data.viewContent(contentWrapper.targetId) data-target-id={{contentWrapper.targetId}}><!-- <div class=\'panel-heading\'>\n			</div> --><div class="panel-heading topic-heading"><div class="pull-right dropdown content-edit-button" dropdown ng-show="(data.activeUser == contentWrapper.content.userId) || data.isAdmin"><a dropdown-toggle><span class="glyphicon glyphicon-chevron-down"></span></a><ul class=dropdown-menu><li ng-click=data.edit() ng-show="(data.activeUser == contentWrapper.content.userId) || data.isAdmin"><a href>Edit</a></li><li ng-click=data.delete() ng-show="(data.activeUser == contentWrapper.content.userId)"><a href>Delete</a></li><li ng-click=data.shadow(!contentWrapper.content.isShadowed) ng-show=data.isAdmin><a href>{{contentWrapper.content.isShadowed ? "Unshadow" : "Shadow"}}</a></li></ul></div><div class=topic-tags><span ng-repeat="topic in contentWrapper.content.topics"><bi-topic-button topic=topics[topic] ng-if="topics[topic].verifiedStatus == &quot;VERIFIED&quot;"></bi-topic-button></span></div></div><div class="feed-panel clearfix"><a class="the-time pull-right" ui-sref="content({id: contentWrapper.content.id})" ng-show=contentWrapper.content.createdAt><span am-time-ago=contentWrapper.content.createdAt></span></a> <span class=content-user-info bi-stats-hover=user stats-target=users[contentWrapper.content.userId]><a bi-user-link user=users[contentWrapper.content.userId] class=content-profile-image><img class="media-object content-profile-image" ng-src="{{:: users[contentWrapper.content.userId].image}}" title="{{:: users[contentWrapper.content.userId].name}}"></a><div class="top-of-panel content-author"><span class=media-heading bi-user-link user=users[contentWrapper.content.userId]>{{:: users[contentWrapper.content.userId].name}}</span><br><span class="media-heading heading-description light" ng-show=users[contentWrapper.content.userId].title>{{:: users[contentWrapper.content.userId].title}}</span></div></span><div class=content-embed><div class="embed-responsive embed-responsive-4by3" ng-if=contentWrapper.embed><iframe class=embed-responsive-item ng-src={{::contentWrapper.embedUrl}} frameborder=0 allowfullscreen></iframe></div></div><div class=biteImage ng-show=contentWrapper.imageUrl ng-click=data.expand(contentWrapper.imageUrl)><img ng-src={{contentWrapper.imageUrl}} class="thumbnail img-responsive content-image"></div><div class=post-text><span bi-highlight-mentions=contentWrapper.content.mentions ng-bind=displaytext change=displaytext></span> <span class=collapse-text ng-if="exceedmax && !expanded" ng-click=toggle()>...more</span></div><div class=link-box-wrapper><div class="media clearfix link-box" ng-show="contentWrapper.content.urlData && !contentWrapper.embed" ng-if=!contentWrapper.embed><img class="media-object url-image img-thumbnail" ng-src="{{contentWrapper.content.urlData.image || contentWrapper.content.urlData.sourceImage}}" ng-show="contentWrapper.content.urlData.image || contentWrapper.content.urlData.sourceImage" bi-err-src="/assets/images/92cb69e1.globe.png"><div class="media-body url-title"><a ng-href={{contentWrapper.content.urlData.resolvedUrl}} class="media-heading h5" bi-external-link>{{:: contentWrapper.content.urlData.title || contentWrapper.content.urlData.resolvedUrl}}<br></a> <a ng-href={{contentWrapper.content.urlData.resolvedUrl}} class=small bi-external-link><img ng-src={{contentWrapper.content.urlData.sourceImage}} class="img-circle source-image" bi-err-src=/assets/images/92cb69e1.globe.png> {{:: contentWrapper.content.urlData.sourceName}}</a></div></div></div><!-- <div class=\'biteImage col-sm-offset-3 col-sm-6\' ng-show=\'contentWrapper.imageUrl\'>\n			<img ng-src=\'{{contentWrapper.imageUrl}}\' class="thumbnail img-responsive content-image"/>\n		</div> --><div ng-show="contentWrapper.additionalContent && contentWrapper.additionalContent[0]"><br><span class=h5><span class="glyphicon glyphicon-plus"></span></span>&nbsp;&nbsp;<em class=h4>Also shared by:</em><div class="media additional-content" ng-repeat="additional in contentWrapper.additionalContent"><a bi-user-link user=users[additional.userId] class=pull-left><img class="media-object profile-image" ng-src={{users[additional.userId].image}} title={{users[additional.userId].name}}></a><div class=media-body><span class="h5 media-heading" bi-user-link user=users[additional.userId]><strong>{{:: users[additional.userId].name}}</strong></span></div><div class=media-body>{{:: additional.text}}</div></div></div></div><div class="panel-footer content-footer lower-footer text-left clearfix"><div class=upvote-comment-group><bi-reaction-button text=Upvote reaction=UPVOTE reaction-data=contentWrapper.interactionData.reactionData users=users target-id={{contentWrapper.targetId}}></bi-reaction-button><a class=comment-button ui-sref="content({id: contentWrapper.content.id})"><span ng-include="\'assets/images/c349ea48.comment.svg\'" class=parlio-comment-icon></span> <span class=reaction-text>{{" Comment" + ((contentWrapper.interactionData.commentData.count == 1) ? "" : "s")}}</span> <span class=badge>{{(contentWrapper.interactionData.commentData.count || 0)}}</span></a></div><span class="light content-reached">Reach: {{contentWrapper.interactionData.reactionData["VIEW"].countData.count || 0}} member{{contentWrapper.interactionData.reactionData["VIEW"].countData.count == 1 ? "" : "s"}} <span class="glyphicon glyphicon-question-sign" tooltip="How many members saw this post" tooltip-append-to-body=true></span></span></div><div class="panel-footer stats-footer-wrapper" ng-if="(contentWrapper.content.userId == data.activeUser) && (contentWrapper.interactionData.reactionData[&quot;VIEW&quot;].countData.count > 0 || contentWrapper.interactionData.reactionData[&quot;UPVOTE&quot;].countData.count > 0)"><div class=stats-footer><div class=stats-label>Post Stats <span class="glyphicon glyphicon-question-sign light" tooltip="Only appears for posts you authored"></span></div><div class="stats-bar stats-bar-border" ng-show="contentWrapper.interactionData.reactionData[&quot;UPVOTE&quot;].countData.count > 0 "><bi-reaction-stats data=contentWrapper.interactionData.reactionData reaction-type=UPVOTE users=users label=Upvotes: target-id="{{contentWrapper.targetId}}"></div><div class=stats-bar ng-show="contentWrapper.interactionData.reactionData[&quot;VIEW&quot;].countData.count > 0"><bi-reaction-stats data=contentWrapper.interactionData.reactionData reaction-type=VIEW users=users label=Reach: target-id="{{contentWrapper.targetId}}"></div></div></div></div>'),a.put("app/directives/biContentForm/biContentForm.html",'<div class="panel content-panel clearfix" ng-class="{\'content-warning\': contentEdit.text && !(contentEdit.topics.length > 0)}">{{wordCount()}}<div class=content-form><span class=category_label>Choose a category:</span> <span class="category_dropdown content-categories" tooltip="Please select a category" tooltip-trigger=show dropdown-select=categories dropdown-model=selectedCategory dropdown-item-label=name dropdown-onchange=changeCategory(selected)></span></div><tags-input class=content-topics ng-model=topicObjects display-property=label min-length=2 replace-spaces-with-dashes=false placeholder="Add up to three topics relevant to your post" on-tag-added=validateTopics() on-tag-removed=validateTopics() max-tags=3 tooltip="Add up to 3 tags" tooltip-trigger=show><auto-complete source=autoComplete($query) min-length=2></auto-complete></tags-input><div><textarea tooltip="Please add a post" tooltip-trigger=show type=text placeholder="Post what matters. Be insightful and concise." class="form-control content-textarea" ng-model=contentEdit.text ng-model-options="{ debounce: 100 }" ng-trim=false ng-change=checkTextArea($event) bi-user-taggable user-tags=contentEdit.mentions></textarea></div><div class=content-form ng-show=textHasUrl><div class=clearfix><div class="media link-box"><img class="media-object url-image pull-left img-thumbnail" ng-src="{{contentEdit.urlData.image || contentEdit.urlData.sourceImage}}" ng-if="contentEdit.urlData.image || contentEdit.urlData.sourceImage"><div class="media-body url-title"><a href={{contentEdit.urlData.resolvedUrl}} bi-external-link class="media-heading h5">{{contentEdit.urlData.title}}<br></a> <a href={{contentEdit.urlData.resolvedUrl}} bi-external-link class=small><img src={{contentEdit.urlData.sourceImage}} ng-if=contentEdit.urlData.sourceImage class="img-circle source-image"> {{contentEdit.urlData.sourceName}}</a></div><span class="glyphicon glyphicon-remove pull-right delete-link" ng-click=removeUrl()></span></div></div></div><div class="content-form content-bottom"><span class=content-upload-image-wrapper ng-show=!uploadedImageUrl><span class="content-upload-image parlio-add-photo-label" ng-file-select=onFileSelect($files) ng-show=!imageProgress accept=image/*><span class="glyphicon glyphicon-picture parlio-add-photo-label" aria-hidden=true></span> Add a photo</span> <span class=image-attach><span class=image-attach ng-if=imageProgress style="display: inline"><bi-loader style="display: inline-block"></bi-loader></span></span></span> <span class=content-form-time-wrapper><span class="content-form-time light">Estimated read time: <span class=read-time><span class="glyphicon glyphicon-time"></span> <span>{{timeToRead() || 0}} seconds</span></span> <a tooltip="Keep it under one minute" tooltip-placement=bottom><span class="glyphicon glyphicon-question-sign"></span></a></span></span></div><div class="content-form content-form-image" ng-show=uploadedImageUrl><span class=image-attach-wrapper><img ng-src="{{uploadedImageUrl}}"> <span class="delete-image glyphicon glyphicon-remove" ng-click=removeImage()></span></span></div><div class="content-form content-bottom clearfix"><div class=button-submit><div class=content-submit><a class=content-dismiss ng-click=dismissContent()>Cancel</a> <span class=submit-loader ng-show=submitInProgress><bi-loader></bi-loader></span> <button type=submit id=contentSubmit class="btn btn-default submit-button" ng-show=!submitInProgress ng-class="{disabled: blockSubmit}" ng-click=submitContent()>Submit</button></div></div></div></div>'),a.put("app/directives/biEnhancedFollowButton/biEnhancedFollowButton.html",'<span class=enhanced-follow-button-wrapper><span ng-show=showButton() ng-click=toggle() class=enhanced-follow-button ng-class="{active: values[target]}" bi-hover enter="hover = true" leave="hover = false"><span class=follow-button-left ng-switch=showState()><span class=follow-name ng-switch-when=-1>Follow</span> <span class=follow-name ng-switch-when=0>Following</span> <span class=follow-name ng-switch-when=1>Unfollow</span></span> <span class=follow-star title="{{values[target] ? \'Unfollow\' : \'Follow\'}}"><span ng-include="\'assets/images/cca8aa4b.icon-enhanced-follow-plus.svg\'" ng-show=!values[target]></span> <span ng-include="\'assets/images/a6d7d5a3.icon-topic-following-normal.svg\'" ng-show="values[target] && !hover"></span> <span ng-include="\'assets/images/59814f8d.icon-topic-following-hover.svg\'" ng-show="values[target] && hover"></span></span></span> &nbsp;</span><wbr>'),a.put("app/directives/biErrorCommunication/biErrorCommunication.html",'<div class="alert alert-danger main-error"><span ng-if=error.text><span class="glyphicon glyphicon-exclamation-sign alert-icon"></span> {{error.text}}</span></div>'),a.put("app/directives/biFollowButton/biFollowButton.html",'<span ng-show=showButton() class=parlio-button ng-class="{\'active\': values[target]}" ng-click=toggle() bi-hover leave="hover = false" enter="hover = true"><span ng-include="\'assets/images/de345f98.icon-follow.svg\'" class=parlio-icon ng-show="showState() == -1"></span> <span ng-include="\'assets/images/e918567a.icon-following.svg\'" class=parlio-icon ng-show="showState() == 0"></span> <span ng-include="\'assets/images/bb67c5a3.icon-unfollow.svg\'" class=parlio-icon ng-show="showState() == 1"></span> &nbsp; <span class=parlio-icon-text ng-switch=showState()><span ng-switch-when=-1>Follow</span> <span ng-switch-when=0>Following</span> <span ng-switch-when=1>Unfollow</span></span></span>'),a.put("app/directives/biFollowPlus/biFollowPlus.html","<span class=follow-plus ng-show=showButton() ng-click=\"toggle(); $event.stopPropagation();\" title=\"{{values[target] ? 'Unfollow' : 'Follow'}}\"><span ng-include=\"'assets/images/cca8aa4b.icon-enhanced-follow-plus.svg'\" ng-show=!values[target]></span> <span ng-include=\"'assets/images/d95652ad.icon-check.svg'\" ng-show=values[target]></span></span>"),a.put("app/directives/biLoader/biLoader.html","<div class=parlio-loader><span></span><span></span><span></span></div>"),a.put("app/directives/biMuteButton/biMuteButton.html",'<span ng-show=showButton() class=parlio-button ng-class="{\'active\': values[target]}" ng-click=toggle() bi-hover enter="hover = true" leave="hover = false"><span ng-include="\'assets/images/9c9f5ff4.icon-mute.svg\'" class=parlio-icon ng-show="showState() == -1"></span> <span ng-include="\'assets/images/f43a133c.icon-muted.svg\'" class=parlio-icon ng-show="showState() == 0"></span> <span ng-include="\'assets/images/ab9f5854.icon-unmute.svg\'" class=parlio-icon ng-show="showState() == 1"></span> &nbsp; <span class=parlio-icon-text ng-switch=showState()><span ng-switch-when=-1>Mute</span> <span ng-switch-when=0>Muted</span> <span ng-switch-when=1>Unmute</span></span></span>'),a.put("app/directives/biMuteButton/biMuteModal.html",'<div class="modal-header h4">Are you sure?</div><div class=modal-body>You won\'t be able to see any more content from <strong>{{name}}</strong> in your feeds, even if it\'s also from another person or topic you follow.</div><div class=modal-footer><button class="btn btn-primary" ng-click=ok()>Yes, mute!</button> <button class="btn btn-warning" ng-click=cancel()>No</button></div>'),a.put("app/directives/biNotification/biNotification.html",'<div class=media><a class=media-left><img src={{users[notification.countData.userIds[0]].image}} class="profile-image"></a><div class=media-body><a class=media-left ng-click=notificationClicked(notification) href={{notificationUrl(notification)}}><strong>{{users[notification.countData.userIds[0]].name}}</strong> <span ng-if="notification.countData.count > 1">(and {{notification.countData.count - 1}} others)</span> {{notification.displayMessage}}.</a> <span class=notification-time am-time-ago=notification.updatedAt></span></div></div>'),a.put("app/directives/biOnboardingFollowCategories/biOnboardingFollowCategories.html",'<div class=onboarding-modal><h3 class=header><b>Welcome to Parlio</b></h3><div class=follow-text-container><h4 class="follow-text show-animation" ng-hide="canSubmit || toggleFade">Follow at least <b>{{numRequiredCategories}}</b> categories to get started</h4></div><div class=container-fluid><div class=row><div class="col-xs-6 col-sm-4 col-lg-3 category-col" ng-model=categories ng-repeat="category in categories"><div class="square-tile category-col"><div class=profile-image><span ng-include=getCategoryImageUrl(category.id) class=category-icon></span></div><h6 class=category-name>{{category.name}}</h6><div class=category-follow-button-container><bi-enhanced-follow-button class=category-follow-button type=topic target={{category.id}} ng-click=checkCanSubmit()></bi-enhanced-follow-button></div></div></div></div></div><div class=next-button-container><div class="btn btn-default parlio-button next-button" ng-class="canSubmit? \'\' : \'customDisabled\'" ng-click=isCanSubmit()>{{nextButtonLabel}}</div><div ng-show="numMoreRequiredCategories > 0" class=following-progress>You must follow {{numMoreRequiredCategories}} more topic{{numMoreRequiredCategories==1?\'\':\'s\'}} to continue.</div><div class=step-label>{{step}} of {{totalSteps}}</div></div></div>'),a.put("app/directives/biOnboardingProfile/biOnboardingProfile.html",'<div class=onboarding-modal><h3 class=header><b>{{actionLabel}} your profile</b></h3><h4 class=follow-text>Introduce yourself to the community</h4><form class="form-horizontal settings-form" role=form ng-show=user name=settingsForm><div class=form-group><div class=col-sm-2></div><div class=col-sm-8><bi-select-profile-image image=user.image></bi-select-profile-image></div><div class=col-sm-2></div></div><div class=form-group ng-class="{\'has-error\': settingsForm.userTitle.$error.required || !settingsForm.userTitle.$valid}"><div class=col-sm-2></div><label for=userTitle class="col-sm-10 control-label">Title</label><div class=col-sm-2></div><div class=col-sm-8><input name=userTitle class=form-control id=userTitle ng-maxlength=60 ng-model=user.title placeholder="(e.g. Student at Stanford University)" required><br><div class="alert alert-danger" role=alert ng-if=settingsForm.userTitle.$error.maxlength><span class="glyphicon glyphicon-exclamation-sign" aria-hidden=true></span> <span class=sr-only>Error:</span> Your title is too long</div></div><div class=col-sm-2></div></div><div class=form-group><div class=col-sm-2></div><label for=userBio class="col-sm-10 control-label">Bio</label><div class=col-sm-2></div><div class=col-sm-8><textarea msd-elastic=\\n\\n class=form-control id=userBio ng-model=user.bio placeholder="More information about you"></textarea></div><div class=col-sm-2></div></div><div class=form-group ng-if=settingsForm.email.$invalid ng-class="{\'has-error\': settingsForm.email.$invalid}"><div class=col-sm-2></div><label for=userBio class="col-sm-10 control-label">E-mail Address</label><div class=col-sm-2></div><div class=col-sm-8><input type=email class=form-control name=email ng-model=user.email required ng></div><div class=col-sm-2></div></div></form><div class=next-button-container><span class=submit-loader ng-show=submitInProgress><bi-loader></bi-loader></span> <button type=submit ng-disabled="settingsForm.$invalid || !canSubmit" ng-show=!submitInProgress ng-class="(settingsForm.$invalid || !canSubmit) ? \'customDisabled\' : \'\'" class="btn btn-default parlio-button next-button" ng-click=updateUser()>{{nextButtonLabel}}</button><div class=step-label>{{step}} of {{totalSteps}}</div></div></div>'),a.put("app/directives/biReactionButton/biReactionButton.html",'<span class=reaction-button ng-class="{\'active\': reactionData[reaction].countData.includesActiveUser}" ng-click=toggleReaction();hoverOut() bi-hover enter="hoverToggle = true" leave="hoverToggle = false"><span class=parlio-vote-icon-container><span ng-include="\'assets/images/c3bd2a17.upvote-normal.svg\'" class=parlio-vote-icon ng-if="!hoverToggle && !reactionData[reaction].countData.includesActiveUser"></span> <span ng-include="\'assets/images/bff52abd.upvote-hover.svg\'" class=parlio-vote-icon ng-if="hoverToggle && !reactionData[reaction].countData.includesActiveUser"></span> <span ng-include="\'assets/images/4b0e55b5.upvote-pressed.svg\'" class=parlio-vote-icon ng-if=reactionData[reaction].countData.includesActiveUser></span></span> <span class=reaction-text>{{text}}</span> <span class=badge>{{reactionData[reaction].countData.count || 0}}</span></span>'),a.put("app/directives/biReactionStats/biReactionStats.html",'<span class=stats-bar-label>{{:: label}}</span> <span ng-repeat="userId in biReactionStats[reactionType].countData.userIds | limitTo: limit"><a bi-user-link user=users[userId]><img ng-src={{users[userId].image}} class=profile-image-small bi-stats-hover=user stats-target=users[userId]></a></span> <span ng-show="biReactionStats[reactionType].countData.count > limit">and&nbsp; <a bi-reaction-list reaction={{reactionType}} target-id={{targetId}}>{{biReactionStats[reactionType].countData.count - limit}} more</a></span>'),a.put("app/directives/biSelectProfileImage/biSelectProfileImage.html",'<div class=select-image-table><div class=select-image-display><img src={{image}} class=cropit-image-preview ng-if="!uploadInProgress"><bi-loader ng-show=uploadInProgress></bi-loader></div><div class=select-image-buttons><div class="select-image-btn btn btn-info" type=file ng-file-select=newImage($files)><span class="glyphicon glyphicon-user"></span> Select new image</div><br><div class="select-image-btn btn btn-success" ng-click=editImage()><span class="glyphicon glyphicon-move"></span> Crop</div></div></div>'),a.put("app/directives/biStatsHover/biStatsHover.html",'<span class=stats-hover><div ng-if="biStatsHover == &quot;topic&quot;"><div class=stats-hover-title><a href={{postsLink}}>{{statsTarget.name}}</a></div><div class=stats-hover-subtitle>TOPIC</div></div><div ng-if="biStatsHover == &quot;user&quot;"><div class=stats-hover-title><a href={{postsLink}}><img ng-src={{statsTarget.image}} class=stats-hover-image></a> <span class=stats-hover-name><a href={{postsLink}}>{{statsTarget.name}}</a></span> <span class=user-hover-title>{{statsTarget.title}}</span></div></div><div class=stats-hover-stats><a href={{followersLink}}>{{topicStats.followers}}<br><span class=light>follower{{topicStats.followers == 1 ? "" : "s"}}</span></a> <a href={{postsLink}}>{{topicStats.posts}}<br><span class=light>post{{topicStats.posts == 1 ? "" : "s"}}</span></a></div><div class="stats-hover-actions text-center"><bi-follow-button target={{targetId}} type={{biStatsHover}}></bi-follow-button><bi-mute-button target={{targetId}} type={{biStatsHover}}></bi-mute-button></div></span>'),a.put("app/directives/biTopicButton/biTopicButton.html",'<span class=topic-button-wrapper><span class=topic-button ng-class="{active: values[topic.id]}"><span ng-include="topic.type === \'CATEGORY\' ? getCategoryImageUrl(topic.id) : image" class=topic-icon></span> <span class=topic-button-left ng-click=goToTopic()><span class=topic-name>{{topic.name || topic.id}}</span></span> <span class=topic-star ng-click="toggle(); $event.stopPropagation();" title="{{values[topic.id] ? \'Unfollow\' : \'Follow\'}}"><span ng-include="\'assets/images/cca8aa4b.icon-enhanced-follow-plus.svg\'" ng-show=!values[topic.id]></span> <span ng-include="\'assets/images/d95652ad.icon-check.svg\'" ng-show=values[topic.id]></span></span></span> &nbsp;</span><wbr>'),a.put("app/directives/biUserLink/biUserLink.html",'<a ui-sref="profile({userId: user.username})" title={{user.name}} ng-transclude></a>'),a.put("app/feed/feed.html",'<div infinite-scroll=growFeed() infinite-scroll-distance=1 infinite-scroll-immediate-check=true infinite-scroll-container="isSmall ? &quot;.scrollable&quot; : window"><div ng-repeat="contentWrapper in data.feed.contentList | limitTo:feedLimit"><div class=content-activity ng-show=contentWrapper.interactionData.commentData.last>{{data.feed.users[contentWrapper.interactionData.commentData.last.userId].name}} <a ui-sref="commentOnContent({id: contentWrapper.content.id, commentId: contentWrapper.interactionData.commentData.last.id})">posted a comment</a> <span class=light>(<span am-time-ago=contentWrapper.interactionData.commentData.last.createdAt></span>)</span></div><div><span bi-content truncate=true users=data.feed.users topics=data.feed.topics content=contentWrapper in-view="$inview && functions.view(contentWrapper.targetId)"></span></div></div><div class=text-center ng-show="feedLimit < data.feed.contentList.length || !data.feed.contentList"><bi-loader></bi-loader></div></div>'),a.put("app/leftnav/leftnav.html",'<div class=whole-left-area ng-mouseleave="isOpen = false;"><headroom class=leftnav-menu ng-class="{\'leftnav-menu-out\': isOpen}" ng-mouseover="isOpen = true;" href=# tolerance=5 offset=200 scroller=.scrollable><div class=leftnav-hamburger></div></headroom><a class=leftnav-logo ng-class="{\'leftnav-logo-mobile\': !isOpen}" href=# ng-click="$state.go(\'feed\', {}, {reload: true}); isOpen=false"><img src=assets/images/822aa1dc.parlio-favicon-32.png class=leftnav-inner> <span class=alpha-badge>alpha</span></a><div class=left-menu-popout ng-show=isOpen id=whole-left-menu><div class=left-menu-spacer><a><span class="glyphicon glyphicon-remove icon-close pull-right" ng-click="isOpen = false"></span></a></div><span ng-show=isOpen class=parlio-title>Parlio</span><ul class=main-list-menu><li ui-sref-active=active><span><a ui-sref=feed ui-sref-opts="{reload: true}" ng-click="isOpen = false"><h5>Explore</h5></a></span></li><li ui-sref-active=active><span><a ui-sref=myfeed ui-sref-opts="{reload: true}" ng-click="isOpen = false"><h5>My Feed</h5></a></span></li><li ui-sref-active=active><span><a ui-sref=members ui-sref-opts="{reload: true}" ng-click="isOpen = false"><h5>Members Directory</h5></a></span></li><li ui-sref-active=active><span><a ui-sref="profile({userId: data.activeUserId})" ui-sref-opts="{reload: true}" ng-click="isOpen = false"><h5>My Profile</h5></a></span></li><li ui-sref-active=active><span><a ui-sref=settings ui-sref-opts="{reload: true}" ng-click="isOpen = false"><h5>My Settings</h5></a></span></li><li><a href=# ng-click=auth.logout() ng-click="isOpen = false"><h5>Log Out</h5></a></li><li ui-sref-active=active ng-show=isAdmin><span><a ui-sref=control ui-sref-opts="{reload: true}" ng-click="isOpen = false"><h5>Admin</h5></a></span></li></ul><ul class=secondary-list-menu><li ui-sref-active=active><span><a ui-sref=etiquette ng-click="isOpen = false"><h5>Etiquette</h5><li ui-sref-active=active><span><a ui-sref=updates ng-click="isOpen = false"><h5>Product Updates</h5></a></span></li></a></span></li></ul><div class=left-nav-topics><div class=myFeedTopics ui-sref-active=active><a ui-sref=myfeed><span class=menu-title ng-click="isOpen = false">My Topics</span></a><!-- <ul class="list-unstyled" ng-click=\'isOpen = false\'>\n          <li ng-repeat=\'topic in followData.userTopicsList | limitTo: 5\' class=\'menu-topics\'>\n            <a ui-sref=\'topic({topic: topic.id})\'>{{topic.name}}</a>\n          </li>\n          <li ng-show=\'followData.userTopicsList.length > 5\'>\n            <a ui-sref=\'profile.topics({userId: data.activeUserId})\'>view all {{followData.userTopicsList.length}}</a>\n          </li>\n        </ul> --></div><div class=trendingClass ng-click="isOpen = false"><span class=menu-title>Trending Topics</span><ul class=list-unstyled><li ng-repeat="topic in data.trending.topics | limitTo: 5" class=trending-topics><a ui-sref="topic({topic: topic.id})" ng-click="isOpen = false">{{topic.name}}</a></li></ul></div></div><div></div></div></div>'),a.put("app/login/adBlockerErrorModal.html",'<div class="modal-header h4">Warning</div><div class=modal-body>It appears you are using an ad or pop-up blocker.<br>This software maybe interfering with some of Parlio\'s functionality.Please whitelist Parlio or disable the blocker for an optimal experience.</div><div class=modal-footer><button class="btn btn-warning" ng-click=cancel()>OK</button></div>'),a.put("app/login/login.html",'<div class=splash-back ng-show=!data.hideSplash><img class=login-photo src="assets/images/66d303a3.parlio-landing-image@2x.png"><div class=splash-text><div class=splash-motto></div><div class=splash-login ng-if=data.showLoader><bi-loader></bi-loader></div><div class=splash-login ng-if=data.showLogin ng-click=doFBLogin()><span class=icon><img src=assets/images/b4530c06.facebook.svg></span> Sign in with Facebook</div><div class=splash-login ng-if=data.showLogin ng-click=doLinkedInLogin()><span class=icon><img src=assets/images/387fbe8b.linkedin.svg></span> Sign in with LinkedIn</div><div class=splash-or ng-if=data.showLogin><span class=or-bar><div class=or-bar-inner>&nbsp;</div></span> <span class=or-text>or</span> <span class=or-bar><div class=or-bar-inner>&nbsp;</div></span></div><div class="splash-login splash-register" ng-if=data.showLogin ng-click=doRequestInvite()><span class=icon><img src=assets/images/e3dd3b03.envelope.svg></span> Request an invitation</div><div class=login-error ng-if=data.hasError><span class="glyphicon login-error-icon glyphicon-exclamation-sign"></span><br><span ng-include=data.errorTemplate></span></div><div class=invite-whitelist ng-if=data.showInvite><form class=form-inline><div class=invite-thank>Thank you!</div><div><img src=assets/images/d95652ad.icon-check.svg></div><div class=invite-explain>If you have an invite code, please enter it below. If not, we will review your information and get back to you as soon as we can.</div>Invite code: <input class="form-control invite-box" ng-model=code><button ng-class="{disabled: !canSubmitInvite}" type=submit class="btn btn-default" ng-click=attemptWhitelist(code)>Submit</button></form><br><br><a href=# ng-click=auth.logout()>Log Out</a></div></div></div>'),a.put("app/login/privateBrowsingError.html","It looks like you might be in Private Browsing mode on Safari.<br><br>We value your privacy too! Unfortunately, our current login flow doesn't work in Private Browsing mode on Safari yet.<br><br>To proceed, please either switch out of Private Browsing mode, or consider using another browser (we support incognito mode on Google Chrome)."),a.put("app/members/members.html",'<div class="form-inline members-search" role=form><div class=form-group><div class=input-group><div class=input-group-addon><span class="glyphicon glyphicon-filter"></span></div><input ng-model=data.memberSearch ng-change=data.searchForMember() class=form-control placeholder=Filter></div></div></div><div class="panel members-table-wrapper"><table class="table members-table"><tr><th></th><th class=max-width>Name</th><th class=hidden-small>Joined</th><th></th></tr><tr ng-repeat="userStat in data.userSearch.users track by userStat.user.username"><td class=member-image-cell><a bi-user-link user=userStat.user><img ng-src={{userStat.user.image}} class="member-image"></a></td><td><span bi-stats-hover=user stats-target=userStat.user><a bi-user-link user=userStat.user>{{userStat.user.name}}</a><br><span class=light>{{userStat.user.title}}</span></span></td><td nowrap class=hidden-small><span am-time-ago=userStat.user.joinDate></span></td><td><bi-follow-button target={{userStat.user.username}} type=user></bi-follow-button></td></tr></table><div class=more-bar ng-show=data.userSearch.cursor.more ng-click=data.getMore()><a>{{data.userSearch.cursor.more}} more results</a> {{data.cursorNextSkip}}</div></div>'),a.put("app/modals/changeInProgressModal/changeInProgressModal.html",'<div class=modal-body><h4 class=modal-title>You haven\'t finished your post. Are you sure you want to leave?</h4></div><div class=modal-footer><button class="btn btn-warning" ng-click=leave()>Leave</button> <button class="btn btn-primary" ng-click=stay()>Stay</button></div>'),a.put("app/modals/confirmedInviteModal/confirmedInviteModal.html",'<div class=modal-body><h3>Confirmed! Prompt was sent to {{inviteeName}}</h3><div class=circular-image-container><img class=circular-confirmation-image ng-src={{inviteeImage}}></div></div><div class=modal-footer><button class="btn btn-primary" ng-click=close()>Done</button></div>'),a.put("app/modals/contentFormModal/contentFormModal.html","<bi-content-form on-dismiss=dismiss() on-success=success() content=content></bi-content-form>"),a.put("app/modals/deleteConfirmModal/deleteConfirmModal.html",'<div class="modal-body h3"><h3 class=modal-title>Are you sure you want to delete your content?</h3></div><div class=modal-footer><button class="btn btn-primary" ng-click=ok()>Delete</button> <button class="btn btn-warning" ng-click=cancel()>Cancel</button></div>'),a.put("app/modals/expandImageModal/expandImageModal.html",'<div class=modal-content><span class="media-body center-block text-center"><img class=expanded-img ng-src={{image}}></span> <span class="btn pull-right close-modal glyphicon glyphicon-remove img-modal-remove" ng-click=cancel()></span></div>'),a.put("app/modals/inviteEmailModal/inviteEmailModal.html",'<div class=modal-body><form class=form-horizontal role=search><div class=form-group><label class=col-sm-2>Code</label><div class=col-sm-10><input class=form-control ng-model=email.code disabled></div></div><div class=form-group><label class=col-sm-2>Subject</label><div class=col-sm-10><input class=form-control ng-model=email.title></div></div><div class=form-group><label class=col-sm-2>From Name</label><div class=col-sm-10><input class=form-control ng-model=email.fromName></div></div><div class=form-group><label class=col-sm-2>From email</label><div class=col-sm-10><input class=form-control ng-model=email.fromEmail type=email></div></div><div class=form-group><label class=col-sm-2>To Name</label><div class=col-sm-10><input class=form-control ng-model=email.toName></div></div><div class=form-group><label class=col-sm-2>To Email</label><div class=col-sm-10><input class=form-control ng-model=email.toEmail disabled></div></div><div class=form-group><label class=col-sm-2>Text</label><div class=col-sm-10><textarea class=form-control ng-model=email.text rows=10></textarea></div></div></form></div><div class=modal-footer><button class="btn btn-primary" ng-click=invite() ng-disabled=data.disableSubmit>Invite</button> <button class="btn btn-warning" ng-click=cancel()>Cancel</button></div>'),a.put("app/modals/inviteToCommentModal/inviteToCommentModal.html",'<script type=text/ng-template id=suggestionTemplate.html><a>\n <img class="typeahead-suggestion-image" src="{{match.model.image}}"></img>\n <span bind-html-unsafe="match.label | typeaheadHighlight:query"></span>\n </a></script><div class=modal-body><form class=user-search-form role=search><input ng-model=data.selectedUserName typeahead-wait-ms=100 class=form-control placeholder="Search Parlio Members" typeahead="entry.path as entry.label for entry in autoComplete($viewValue)" typeahead-template-url=suggestionTemplate.html typeahead-on-select=selectUser($item)><textarea type=text ng-model=data.inviteMessage class="form-control invite-message-field" tooltip="Message (optional)" placeholder="Message (optional)"></textarea></form></div><div class=modal-footer><button class="btn btn-primary" ng-click=invite() ng-disabled="data.selectedUserID == null">Invite</button> <button class="btn btn-warning" ng-click=cancel()>Cancel</button></div>'),a.put("app/modals/onboardingFollowCategoriesModal/onboardingFollowCategoriesModal.html","<bi-onboarding-follow-categories on-next=next() categories=categories num-required-categories=numRequiredCategories step=step total-steps=totalSteps></bi-onboarding-follow-categories>"),a.put("app/modals/onboardingProfileModal/onboardingProfileModal.html","<bi-onboarding-profile on-next=next() user=user step=step total-steps=totalSteps></bi-onboarding-profile>"),a.put("app/modals/requestInviteModal/requestInviteModal.html",'<div class=modal-body><form novalidate name=requestInviteForm class=request-invite-form ng-if=!data.submitted><img src=assets/images/1f1d663b.parlio-logo-gradient.png class=logo> <span class=request-title>Almost there</span><div class=form-group><label for=requestName>Name</label><input class=form-control name=requestName id=requestName ng-model=data.request.name ng-class="{\'submit-error\': submitAttempted}" required> <span class=error ng-show="!requestInviteForm.requestName.$valid && submitAttempted">Please enter a valid name</span></div><div class=form-group><label for=requestEmail>Email</label><input type=email class=form-control name=requestEmail id=requestEmail ng-model=data.request.email ng-class="{\'submit-error\': submitAttempted}" required> <span class=error ng-show="!requestInviteForm.requestEmail.$valid && submitAttempted">Please enter a valid e-mail address</span></div><div class=form-group><label for=requestReferred>Referred by <i>(optional)</i></label><input class=form-control id=requestReferred ng-model=data.request.referredBy></div><br><button type=submit class=btn ng-click=submit(requestInviteForm)>Submit</button><div class=light-close><a class=light ng-click=ok()>(close)</a></div></form><div class=request-invite-form ng-if=data.submitted><img src=assets/images/d95652ad.icon-check.svg class=request-check> <span class=request-title>Request received</span> <span class="request-title request-subtitle">We will review your request and get back to you with further details.</span> <button type=submit class=btn ng-click=ok()>OK</button></div></div>'),a.put("app/modals/uploadImageModal/biUploadImage.html",'<div class=image-cropper ng-show=editingImage><!-- The preview container is needed for background image to work --><div class=cropit-image-preview-container><div class=cropit-image-preview></div></div><input type=range class="cropit-image-zoom-input"> <input type=file class="cropit-image-input"></div><div ng-click=ok() class="cropit-save btn btn-success" ng-show="editingImage && !uploadInProgress">Crop & Save</div><bi-loader ng-show=uploadInProgress></bi-loader><span class="btn btn-default" ng-click=openFileChooser() ng-show=!editingImage>Choose an image</span>'),a.put("app/modals/uploadImageModal/uploadImageModal.html",'<div class=modal-body><div class=modal-upload><bi-upload-image on-success=onSuccess ng-model="imageUrl"></div></div><div class=modal-footer><a class=light ng-click=cancel()>Dismiss</a></div>'),a.put("app/modals/userList/userList.html",'<div class="modal-header h4" ng-show=title>{{title}} {{data.userList.count}} member<span ng-if="data.userList.count != 1">s</span><!-- <button type="button" class="close" data-dismiss="modal">Close</button> --> <span class="btn pull-right close-modal" ng-click=cancel()>x</span></div><div class=modal-body><div class="userlist clearfix" ng-repeat="user in data.userList.users"><span class=userlist-info><a bi-user-link user=user class="media-left media-middle"><img class="media-object profile-image" ng-src={{user.image}} title={{user.name}}></a> <span class="media-body media-middle"><span class=media-heading bi-user-link user=user>{{user.name | shortenName}}</span><br><span class="media-heading light hidden-small" ng-show=user.title>{{user.title}}</span></span></span> <span class="userlist-buttons clearfix"><bi-follow-button target={{user.username}} type=user></bi-follow-button></span></div></div>'),a.put("app/notifications/notifications.html",'<div class=notification-list-wrapper><div class=text-center ng-if=!notificationData.notifications><bi-loader></bi-loader></div><div class="notification-list clearfix" ng-repeat="notification in notificationData.notifications.notifications" ng-class="{unread: notification.unread}"><div class=notification-info><span class=notification-image-wrapper><img src={{notificationData.notifications.users[notification.countData.userIds[0]].image}} class=profile-image></span> <span class=notification-text><a ui-sref="profile({userId: notification.countData.userIds[0]})">{{notificationData.notifications.users[notification.countData.userIds[0]].name}}</a> <span ng-if="notification.countData.count > 1">(and {{notification.countData.count - 1}} others)</span> <a ng-click="toggleNotificationUnread(notification, false)" href={{notificationUrl(notification)}}>{{notification.displayMessage}}{{notification.detailMessage ? \': "\' + notification.detailMessage + \'"\' : \'\'}}.</a><br><span am-time-ago=notification.updatedAt class=light></span></span> <span class=notification-status ng-class="{unread: notification.unread}" ng-click=toggleNotificationUnread(notification)><span class="glyphicon glyphicon-ok" ng-show=!notification.unread></span> <span ng-show=notification.unread class=unread>Mark as read <span class=unread-button></span></span></span></div></div></div>'),a.put("app/profile/profile.comments.html",'<div ng-repeat="cc in data.commentFeed.commentWithContent"><div class=content-activity>{{data.commentFeed.users[cc.commentWrapper.comment.userId].name}} <a ui-sref="commentOnContent({id: cc.contentWrapper.content.id, commentId: cc.commentWrapper.comment.id})">posted a comment</a> <span class=light>(<span am-time-ago=cc.commentWrapper.comment.createdAt></span>)</span></div><div><span bi-content users=data.commentFeed.users topics=data.commentFeed.topics content=cc.contentWrapper in-view="$inview && functions.view(contentWrapper.targetId)" truncate=true></span></div></div>'),a.put("app/profile/profile.html",'<div class=userpanel ng-cloak ng-if=data.profileUser><div class="panel-body profile-bg"><span class=profile-edit ng-show="data.profileUserId == data.currentUserId"><a ui-sref=settings><span class="glyphicon glyphicon-cog" aria-hidden=true></span>&nbsp;Edit</a></span><div class="media profile-left"><a class="media-left media-middle"><img class=main-profile-image ng-src={{data.profileUser.image}} alt={{data.profileUser.name}}></a><div class="media-middle profile-info"><div class=profile-name>{{data.profileUser.name}}</div><div class=profile-title>{{data.profileUser.title}}</div></div></div><div ng-if=data.canFollow class="profile-actions clearfix"><bi-follow-button type=user target={{data.profileUserId}} after=data.refreshProfile()></bi-follow-button><bi-mute-button type=user target={{data.profileUserId}}></bi-mute-button></div></div><div class=profile-bio ng-show=data.profileUser.bio><div bi-overflow text=data.profileUser.bio collapsed-class=collapsed-bio expanded-class=expanded-bio></div></div><div class=bio-separator></div><div class=profile-controls-wrapper><div class=profile-controls ng-show=data.profileInteractions><div class=profile-control ui-sref-active=active ng-click="$state.go(\'profile\')"><span class=profile-control-number><a ui-sref="profile({userId: data.profileUserId})">{{data.profileInteractions.posts}}</a></span> <span class=profile-control-label>post{{data.profileInteractions.posts == 1 ? "" : "s"}}</span></div><div class=profile-control ui-sref-active=active ng-click="$state.go(\'profile.followers\')"><span class=profile-control-number><a ui-sref="profile.followers({userId: data.profileUserId})">{{data.profileInteractions.followers}}</a></span> <span class=profile-control-label>follower{{data.profileInteractions.followers == 1 ? "" : "s"}}</span></div><div class=profile-control ui-sref-active=active ng-click="$state.go(\'profile.following\')"><span class=profile-control-number><a ui-sref="profile.following({userId: data.profileUserId})">{{data.profileInteractions.following}}</a></span> <span class=profile-control-label>member{{data.profileInteractions.following == 1 ? "" : "s"}} followed</span></div><div class=profile-control ui-sref-active=active ng-click="$state.go(\'profile.topics\')"><span class=profile-control-number><a ui-sref="profile.topics({userId: data.profileUserId})">{{data.profileInteractions.topics}}</a></span> <span class=profile-control-label>topic{{data.profileInteractions.topics == 1 ? "" : "s"}} followed</span></div><div class=profile-control ui-sref-active=active ng-click="$state.go(\'profile.comments\')"><span class=profile-control-number><a ui-sref="profile.comments({userId: data.profileUserId})">{{data.profileInteractions.comments}}</a></span> <span class=profile-control-label>comment{{data.profileInteractions.comments == 1 ? "" : "s"}}</span></div></div></div></div><span ui-view></span>'),a.put("app/profile/profile.posts.html",'<div infinite-scroll=growFeed() infinite-scroll-distance=1 infinite-scroll-immediate-check=true infinite-scroll-container="isSmall ? &quot;.scrollable&quot; : window"><div ng-repeat="contentWrapper in data.profileFeed.contentList | limitTo:feedLimit"><span bi-content truncate=true users=data.profileFeed.users topics=data.profileFeed.topics content=contentWrapper in-view="$inview && functions.view(contentWrapper.targetId)"></span></div><div class=text-center ng-show="feedLimit < data.feed.contentList.length || !data.feed.contentList"><bi-loader></bi-loader></div></div>'),a.put("app/profile/profile.topics.html",'<div class="media userlist clearfix" ng-repeat="topicId in data.userTopics.sortedTopicIds"><span class=userlist-info><a ui-sref="topic({topic: topicId})">{{data.userTopics.topics[topicId].name}}</a></span> <span class=userlist-buttons><bi-follow-button target={{topicId}} type=topic></bi-follow-button></span></div>'),a.put("app/profile/profile.users.html",'<div class="userlist clearfix" ng-repeat="userId in data.userList.sortedUserIds"><span class=userlist-info><a bi-user-link user=data.userList[userId] class="media-left media-middle"><img class="media-object profile-image" ng-src={{data.userList.users[userId].image}} title={{data.userList.users[userId].name}}></a> <span class="media-body media-middle"><span class=media-heading bi-user-link user=data.userList.users[userId]>{{data.userList.users[userId].name | shortenName}}</span><br><span class="media-heading hidden-small light" ng-show=data.userList.users[userId].title>{{data.userList.users[userId].title}}</span></span></span> <span class="userlist-buttons clearfix"><bi-follow-button target={{userId}} type=user></bi-follow-button></span></div>'),a.put("app/rightnav/rightnav.html",'<div class=side-bar><div class="threeButtons clearfix"><div class=alertButtons><div class=dropdown dropdown on-toggle=functions.toggleNotificationDropdown(open)><div class="notificationsButton dropdown-toggle" ng-class="{active: notificationOpen}" type=button id=dropdownMenu1 data-toggle=dropdown dropdown-toggle aria-expanded=true><div class=alert-count ng-show=notificationData.notificationCount><span class="label label-primary">{{notificationData.notificationCount}}</span></div><span class="glyphicon glyphicon-bell"></span></div><ul class="dropdown-menu dropdown-menu-right alert-menu" role=menu aria-labelledby=dropdownMenu1><span ng-if=!notificationData.notifications class=text-center><bi-loader></bi-loader></span><li role=presentation ng-repeat="notification in notificationData.notifications.notifications | limitTo: 5" ng-class="{unread: notification.unread}"><bi-notification notification=notification users=notificationData.notifications.users></bi-notification></li><li role=presentation class=divider ng-show=notificationData.notifications></li><li role=presentation class="view-all-notifications ng-scope" ng-show=notificationData.notifications><span><a ui-sref=notifications>View all</a></span></li></ul></div></div><div class="composeButton rightnav-button" ng-click=openCompose()><span class="glyphicon glyphicon-pencil pencil"></span> <span class=compose-text>Compose</span></div></div><div class=recommended><span ng-show="data.recommendedTopics.topics.length > 0"><div class=recommended-title>Featured Tags</div><div class=recommended-block><div class=recommended-table><div class="recommended-row topic-row" ng-repeat="topic in data.recommendedTopics.topics" ng-click="$state.go(\'topic\', {topic: topic.id})"><span class=recommended-image-cell><a ui-sref="topic({topic: topic.id})"><span ng-include="topic.type === \'CATEGORY\' ? functions.getCategoryImageUrl(topic.id) : topicTypes[topic.type].image" class=topic-image></span></a></span> <span class=topic-name-cell><a ui-sref="topic({topic: topic.id})">{{topic.name}}</a></span> <span class=follow-cell><bi-follow-plus type=topic target={{topic.id}}></bi-follow-plus></span></div></div><div class=show-more ng-show="data.recommendedTopics.cursor.more > 0"><a ng-click=functions.refreshRecommendedTopics()>Show more</a></div></div></span> <span ng-show="data.recommendedUsers.users.length > 0"><div class=recommended-title>Featured Members</div><div class=recommended-block><div class=recommended-table><div class=recommended-row ng-repeat="user in data.recommendedUsers.users"><span class=recommended-image-cell><a bi-user-link user=user><img class=member-image ng-src={{user.image}}></a></span> <span class=user-name-cell><span bi-stats-hover=user stats-target=user><a bi-user-link user=user>{{user.name}}</a><br><span class=light>{{user.title}}</span></span></span> <span class=follow-cell><bi-follow-plus type=user target={{user.username}}></bi-follow-plus></span></div></div><div class=show-more ng-show="data.recommendedUsers.cursor.more > 0"><a ng-click=functions.refreshRecommendedUsers()>Show more</a></div></div></span></div></div>'),a.put("app/search/search.html",'<span class=h2>Search results for: <em>{{data.query}}</em></span><br><br><div class=no-results ng-if="data.feed && data.feed.contentList.length == 0">No results found for: <em>{{data.query}}</em></div><div ng-repeat="contentWrapper in data.feed.contentList"><span bi-content truncate=true topics=data.feed.topics users=data.feed.users content=contentWrapper in-view="$inview && functions.view(contentWrapper.targetId)"></span></div>'),a.put("app/settings/settings.html",'<form class="form-horizontal settings-form" role=form ng-show=user name=settingsForm><div class=form-group><label class="col-sm-2 control-label">Image</label><div class=col-sm-10><bi-select-profile-image image=user.image></bi-select-profile-image></div></div><div class=form-group ng-class="{\'has-error\': !settingsForm.userTitle.$valid}"><label for=userTitle class="col-sm-2 control-label">Title</label><div class=col-sm-10><input name=userTitle class=form-control id=userTitle ng-maxlength=60 ng-model=user.title placeholder="(e.g. Student at Stanford University)"><br><div class="alert alert-danger" role=alert ng-if=settingsForm.userTitle.$error.maxlength><span class="glyphicon glyphicon-exclamation-sign" aria-hidden=true></span> <span class=sr-only>Error:</span> Your title is too long</div></div></div><div class=form-group><label for=userBio class="col-sm-2 control-label">Bio</label><div class=col-sm-10><textarea msd-elastic=\\n\\n class=form-control id=userBio ng-model=user.bio placeholder="More information about you"></textarea></div></div><div class=form-group><label for=userBio class="col-sm-2 control-label">E-mail Settings</label><div class=col-sm-10><div class=checkbox><label><input type=checkbox ng-model=user.receiveDailyEmails>Receive daily e-mails</label></div></div></div><div class=form-group ng-class="{\'has-error\': settingsForm.email.$invalid}"><label for=userBio class="col-sm-2 control-label">E-mail Address</label><div class=col-sm-10><input type=email class=form-control name=email ng-model=user.email required ng></div></div><div class=form-group><div class="col-sm-offset-2 col-sm-10"><button type=submit ng-disabled="settingsForm.$invalid || !canSubmit" class="btn btn-default" ng-click=updateUser()>Submit</button></div></div></form>'),a.put("app/topic/topic.html",'<div class=userpanel ng-cloak><div class="panel-body topic-bg"><div class="media profile-left"><div class="media-body media-middle profile-info"><div class=profile-name>{{data.stats.topic.name || activeTopic}}</div><div class=profile-title>Topic</div></div></div><div class=profile-actions><bi-follow-button type=topic target={{activeTopic}}></bi-follow-button><bi-mute-button type=topic target={{activeTopic}}></bi-mute-button></div></div><div class=profile-controls-wrapper><div class=profile-controls ng-show=data.stats><div class=profile-control ui-sref-active=active ng-click="$state.go(\'topic\')"><span class=profile-control-number><a ui-sref="topic({topic: activeTopic})">{{data.stats.posts}}</a></span> <span class=profile-control-label>posts</span></div><div class=profile-control ui-sref-active=active ng-click="$state.go(\'topic.followers\')"><span class=profile-control-number><a ui-sref="topic.followers({topic: activeTopic})">{{data.stats.followers}}</a></span> <span class=profile-control-label>followers</span></div></div></div></div><span ui-view></span>'),a.put("app/topnav/topnav.html",'<script type=text/ng-template id=suggestionTemplate.html><a>\n <img ng-show="match.model.image" class="typeahead-suggestion-image" src="{{match.model.image}}"></img>\n <span bind-html-unsafe="match.label | typeaheadHighlight:query"></span>\n </a></script><headroom class="clearfix headroom top-container" tolerance=5 offset=200 scroller=.scrollable><label class=nav-title>{{navTitle}}</label><span class=topnav-buttons><div class=alertButtons ng-click="$state.go(\'notifications\')"><div class=notificationsButton ng-class="{active: notificationOpen}" type=button><div class=alert-count ng-show=notificationData.notificationCount><span class="label label-primary">{{notificationData.notificationCount}}</span></div><span class="glyphicon glyphicon-bell"></span></div></div><div class="composeButton rightnav-button" ng-click=openCompose()><span class="glyphicon glyphicon-pencil pencil"></span></div></span><form class=search-form role=search><input ng-model=data.topSearch typeahead-wait-ms=100 class=form-control placeholder="Search Parlio" typeahead="entry.path as entry.label for entry in functions.autoComplete($viewValue)" typeahead-template-url=suggestionTemplate.html typeahead-on-select=functions.topSelect($item)></form></headroom>')
}]);